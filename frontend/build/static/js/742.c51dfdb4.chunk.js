"use strict";(self.webpackChunkstarter_bt5=self.webpackChunkstarter_bt5||[]).push([[742],{8769:(e,t,r)=>{r.d(t,{Z:()=>Z});var o=r(2791),a=r(1889),n=r(5527),s=r(890),d=r(4294),i=r(8096),l=r(4925),c=r(3926),u=r(9891),h=r(5289),p=r(5661),x=r(9157),v=r(7391),j=r(7123),m=r(184);const g="http://localhost:5000/node-parameter/",Z=()=>{var e,t,r,Z;const[b,y]=(0,o.useState)(null),[_,f]=(0,o.useState)(!1),[C,k]=(0,o.useState)(!1),[P,S]=(0,o.useState)(!1),[w,N]=(0,o.useState)({port:"",method:"",parity:"",baudrate:"",stopbits:"",wordLength:""}),[T,B]=(0,o.useState)(""),[U,E]=(0,o.useState)(""),[L,W]=(0,o.useState)(""),[O,q]=(0,o.useState)(""),[M,D]=(0,o.useState)(""),[A,J]=(0,o.useState)("");if((0,o.useEffect)((()=>{(async()=>{try{const t=await fetch("".concat(g)),r=await t.json();if(y(r),r.node_parameters){var e;const t=null===(e=r.node_parameters.find((e=>"modbus"===e.name)))||void 0===e?void 0:e.value;t&&N(t)}}catch(t){console.error("Error fetching data:",t)}})()}),[]),!b)return(0,m.jsx)("p",{children:"Loading..."});const F=null===(e=b.node_parameters.find((e=>"spb_parameter"===e.name)))||void 0===e?void 0:e.value,I=null===(t=b.node_parameters.find((e=>"node_attributes"===e.name)))||void 0===t?void 0:t.value,G=null===(r=b.node_parameters.find((e=>"mqtt"===e.name)))||void 0===r?void 0:r.value,H=(null===(Z=b.node_parameters.find((e=>"modbus"===e.name)))||void 0===Z||Z.value,[...new Set([110,300,600,1200,2400,4800,9600,14400,19200,38400,57600,115200,128e3,256e3])]),V=[...new Set([7,8])],Q=[...new Set(["ODD","EVEN","NONE"])],R=[...new Set([1,2])],z=()=>{f(!1),k(!1),S(!1)};return(0,m.jsxs)(a.ZP,{container:!0,spacing:1,children:[(0,m.jsx)(a.ZP,{item:!0,xs:6,children:(0,m.jsxs)(n.Z,{style:{padding:"20px",marginBottom:"20px"},children:[(0,m.jsx)(s.Z,{variant:"h6",children:"SPB Parameter"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Edge Node Id:"})," ",null===F||void 0===F?void 0:F.edge_node_id]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Group Id:"})," ",null===F||void 0===F?void 0:F.group_id]}),(0,m.jsx)(d.Z,{variant:"outlined",onClick:()=>{B((null===F||void 0===F?void 0:F.edge_node_id)||""),E((null===F||void 0===F?void 0:F.group_id)||""),f(!0)},children:"Update"})]})}),(0,m.jsx)(a.ZP,{item:!0,xs:6,children:(0,m.jsxs)(n.Z,{style:{padding:"20px",marginBottom:"20px"},children:[(0,m.jsx)(s.Z,{variant:"h6",children:"Node Attributes"}),(0,m.jsxs)("div",{style:{marginTop:"1px"},children:["object"===typeof I&&Object.entries(I).map((e=>{let[t,r]=e;return(0,m.jsx)("div",{children:(0,m.jsxs)(s.Z,{variant:"body1",children:[(0,m.jsxs)("strong",{children:[t,":"]})," ","object"===typeof r?JSON.stringify(r):r]})},t)})),(0,m.jsx)(d.Z,{variant:"outlined",onClick:()=>{W((null===I||void 0===I?void 0:I.description)||""),q((null===I||void 0===I?void 0:I.version)||""),k(!0)},children:"Update"})]})]})}),(0,m.jsx)(a.ZP,{item:!0,xs:12,children:(0,m.jsxs)(n.Z,{style:{padding:"20px",marginBottom:"20px"},children:[(0,m.jsx)(s.Z,{variant:"h6",children:"MQTT"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Broker Host:"})," ",null===G||void 0===G?void 0:G.broker_host]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("strong",{children:"Broker Port:"})," ",null===G||void 0===G?void 0:G.broker_port]}),(0,m.jsx)(d.Z,{variant:"outlined",onClick:()=>{D((null===G||void 0===G?void 0:G.broker_host)||""),J((null===G||void 0===G?void 0:G.broker_port)||""),S(!0)},children:"Update"})]})}),(0,m.jsx)(a.ZP,{item:!0,xs:12,children:(0,m.jsxs)(n.Z,{style:{padding:"20px"},children:[(0,m.jsx)(s.Z,{variant:"h6",children:"Modbus Parameters"}),(0,m.jsx)("div",{style:{display:"flex",flexDirection:"row",marginTop:"10px"},children:["Port","Method","Parity","Baudrate","Stopbits","WordLength"].map(((e,t)=>(0,m.jsx)("div",{style:{marginRight:"20px"},children:(0,m.jsxs)(i.Z,{fullWidth:!0,children:[(0,m.jsx)(l.Z,{children:e}),(0,m.jsxs)(c.Z,{value:w[e.toLowerCase()],onChange:t=>(async(e,t)=>{N((r=>({...r,[e]:t})));const r={modbus:{...w,[e]:t}};try{const e=await fetch("http://localhost:5000/node-parameter/1",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});e.ok?console.log("Node Parameter updated successfully."):console.error("Failed to update Node Parameter:",e.statusText)}catch(o){console.error("Error updating Node Parameter:",o)}})(e.toLowerCase(),t.target.value),children:["Baudrate"===e&&H.map((e=>(0,m.jsx)(u.Z,{value:e,children:e},e))),"WordLength"===e&&V.map((e=>(0,m.jsx)(u.Z,{value:e,children:e},e))),"Parity"===e&&Q.map((e=>(0,m.jsx)(u.Z,{value:e,children:e},e))),"Stopbits"===e&&R.map((e=>(0,m.jsx)(u.Z,{value:e,children:e},e))),("port"===e.toLowerCase()||"method"===e.toLowerCase())&&(0,m.jsx)(u.Z,{value:w[e.toLowerCase()],children:w[e.toLowerCase()]},w[e.toLowerCase()])]})]})},t)))})]})}),(0,m.jsxs)(h.Z,{open:_,onClose:z,children:[(0,m.jsx)(p.Z,{children:"Update SPB Parameter"}),(0,m.jsxs)(x.Z,{children:[(0,m.jsx)(v.Z,{label:"Edge Node ID",value:T,onChange:e=>B(e.target.value),fullWidth:!0}),(0,m.jsx)(v.Z,{label:"Group ID",value:U,onChange:e=>E(e.target.value),fullWidth:!0})]}),(0,m.jsxs)(j.Z,{children:[(0,m.jsx)(d.Z,{onClick:z,children:"Cancel"}),(0,m.jsx)(d.Z,{onClick:async()=>{const e={spb_parameter:{edge_node_id:T,group_id:U}};try{const t=await fetch("".concat(g,"3"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t.ok?(console.log("SPB Parameter updated successfully."),y((e=>{const t=e.node_parameters.map((e=>"spb_parameter"===e.name?{...e,value:{edge_node_id:T,group_id:U}}:e));return{...e,node_parameters:t}}))):console.error("Failed to update SPB Parameter:",t.statusText)}catch(t){console.error("Error updating SPB Parameter:",t)}z()},color:"primary",children:"Update"})]})]}),(0,m.jsxs)(h.Z,{open:C,onClose:z,children:[(0,m.jsx)(p.Z,{children:"Update Node Attribute"}),(0,m.jsxs)(x.Z,{children:[(0,m.jsx)(v.Z,{label:"Description",value:L,onChange:e=>W(e.target.value),fullWidth:!0}),(0,m.jsx)(v.Z,{label:"Value",value:O,onChange:e=>q(e.target.value),fullWidth:!0})]}),(0,m.jsxs)(j.Z,{children:[(0,m.jsx)(d.Z,{onClick:z,children:"Cancel"}),(0,m.jsx)(d.Z,{onClick:async()=>{const e={node_attribute:{description:L,version:O}};try{const t=await fetch("".concat(g,"4"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t.ok?(y((e=>({...e,node_parameters:e.node_parameters.map((e=>"node_attributes"===e.name?{...e,value:{description:L,version:O}}:e))}))),console.log("Node Attribute updated successfully.")):console.error("Failed to update Node Attribute:",t.statusText)}catch(t){console.error("Error updating Node Attribute:",t)}z()},color:"primary",children:"Update"})]})]}),(0,m.jsxs)(h.Z,{open:P,onClose:z,children:[(0,m.jsx)(p.Z,{children:"Update Mqtt"}),(0,m.jsxs)(x.Z,{children:[(0,m.jsx)(v.Z,{label:"Broker Host",value:M,onChange:e=>D(e.target.value),fullWidth:!0}),(0,m.jsx)(v.Z,{label:"Broker Port",value:A,onChange:e=>J(e.target.value),fullWidth:!0})]}),(0,m.jsxs)(j.Z,{children:[(0,m.jsx)(d.Z,{onClick:z,children:"Cancel"}),(0,m.jsx)(d.Z,{onClick:async()=>{const e={mqtt:{broker_host:M,broker_port:A}};try{const t=await fetch("".concat(g,"2"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t.ok?(console.log("Mqtt updated successfully."),y((e=>{const t=e.node_parameters.map((e=>"mqtt"===e.name?{...e,value:{broker_host:M,broker_port:A}}:e));return{...e,node_parameters:t}}))):console.error("Failed to update Mqtt:",t.statusText)}catch(t){console.error("Error updating Mqtt:",t)}z()},color:"primary",children:"Update"})]})]})]})}},8742:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});r(2791);var o=r(8769),a=r(184);const n=()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:"NodeParameter"}),(0,a.jsx)(o.Z,{})]})}}]);
//# sourceMappingURL=742.c51dfdb4.chunk.js.map