"use strict";(self.webpackChunkstarter_bt5=self.webpackChunkstarter_bt5||[]).push([[399],{2399:(e,t,r)=>{r.d(t,{Z:()=>D});var a=r(2791),n=r(1889),s=r(4294),i=r(9281),c=r(5527),l=r(9836),o=r(6890),d=r(5855),h=r(3994),u=r(3382),x=r(9658),j=r(5289),v=r(5661),Z=r(9157),m=r(890),p=r(8096),g=r(4925),y=r(3926),f=r(9891),C=r(7391),P=r(7123),b=r(3400),A=r(2419),S=r(5585),k=r(7755),w=r(184);const E=(0,k.Z)((e=>({root:{padding:e.spacing(2)},header:{display:"flex",alignItems:"center",marginBottom:e.spacing(2)},headerText:{fontFamily:"Arial, sans-serif",fontSize:"18px",fontWeight:"bold",color:"#333",marginRight:e.spacing(2)},buttonGroup:{marginLeft:"auto",display:"flex",alignItems:"center"},addButton:{marginRight:e.spacing(2),backgroundColor:e.palette.success.main,color:"#fff","&:hover":{backgroundColor:e.palette.success.dark}},deleteButton:{color:e.palette.error.main}}))),D=()=>{const e=E(),[t,r]=(0,a.useState)([]),[k,D]=(0,a.useState)(""),[_,I]=(0,a.useState)([]),[N,T]=(0,a.useState)([]),[R,F]=(0,a.useState)(null),[U,O]=(0,a.useState)(!1),[W,B]=(0,a.useState)(""),[J,H]=(0,a.useState)(""),[L,q]=(0,a.useState)(""),[V,z]=(0,a.useState)(""),[G,K]=(0,a.useState)(""),[M,Q]=(0,a.useState)(""),[X,Y]=(0,a.useState)(""),[$,ee]=(0,a.useState)(""),[te,re]=(0,a.useState)(""),[ae,ne]=(0,a.useState)(""),[se,ie]=(0,a.useState)(""),[ce,le]=(0,a.useState)(""),[oe,de]=(0,a.useState)(""),[he,ue]=(0,a.useState)(!1),[xe,je]=(0,a.useState)(!1),[ve,Ze]=(0,a.useState)(!1),[me,pe]=(0,a.useState)(null),[ge,ye]=(0,a.useState)(null),[fe,Ce]=(0,a.useState)(!1),[Pe,be]=(0,a.useState)(!1),[Ae,Se]=(0,a.useState)(""),[ke,we]=(0,a.useState)(""),[Ee,De]=(0,a.useState)(!1),[_e,Ie]=(0,a.useState)(""),[Ne,Te]=(0,a.useState)(""),[Re,Fe]=(0,a.useState)(!1),[Ue,Oe]=(0,a.useState)([{function_code:"",address:"",ParameterName:"",data_type:""}]),[We,Be]=(0,a.useState)([{name:"",value:""}]),[Je,He]=(0,a.useState)(null),[Le,qe]=(0,a.useState)(!1),[Ve,ze]=(0,a.useState)(!1),[Ge,Ke]=(0,a.useState)([]);(0,a.useEffect)((()=>{setTimeout((()=>{re(""),ne(""),ie(""),le(""),de("")}),5e3)}),[te,ae,se,ce,oe]),(0,a.useEffect)((()=>{(async()=>{try{const e=await fetch("http://localhost:5000/devices/"),t=await e.json();Array.isArray(t.devices)?r(t.devices):console.error("Invalid response format for devices:",t)}catch(e){console.error("Error fetching devices:",e)}})()}),[]);const Me=async e=>{try{console.log("Fetching device details for deviceId:",e);const t=await fetch("http://localhost:5000/devices/".concat(encodeURIComponent(e))),r=await t.json();ze(!0),r.device&&Array.isArray(r.device.parameters)?r.device.parameters.length>0?(I(r.device.parameters),de(""),le("")):(I([]),T([]),le("No Parameters And Attributes connected to the selected device")):(I([]),le("Error fetching Parameters and Attributes or no Parameters and Attributes connected to the selected device")),D(e),r.device&&(Se(r.device.name),we(r.device.slave_id),T(r.device.attributes))}catch(t){console.error("Error fetching Device details:",t),le("Error fetching Device details. Please try again.")}},Qe=e=>{const t=e.target.value;Me(t)},Xe=()=>{De(!1)},Ye=()=>{Fe(!1)},$e=()=>{Ce(!1)},et=()=>{Y(""),ee("")},tt=()=>{ue(!1),et()},rt=()=>{je(!1),Oe([{function_code:"",address:"",ParameterName:"",data_type:""}]),at()},at=()=>{Oe([{function_code:"",address:"",ParameterName:"",data_type:""}])},nt=()=>{console.log("Add Parameter button clicked"),Oe([...Ue,{function_code:"",address:"",ParameterName:"",data_type:""}]),je(!0)},st=()=>{O(!1),B(""),H(""),q(""),z("")},it=(e,t,r)=>{const a=[...Ue];a[e][t]=r,Oe(a)},ct=()=>{Be([{name:"",value:""}])},lt=()=>{Ze(!1),Be([{name:"",value:""}]),ct()},ot=()=>{console.log("Add Attribute button clicked"),Be([...We,{name:"",value:""}]),Ze(!0)},dt=(e,t,r)=>{const a=[...We];a[e][t]=r,Be(a)},ht=()=>{qe(!1),K(""),Q("")};return(0,w.jsxs)("div",{className:e.root,children:[(0,w.jsx)("div",{className:e.header,children:(0,w.jsxs)(n.ZP,{container:!0,spacing:2,justifyContent:"flex-end",children:[(0,w.jsx)(n.ZP,{item:!0,children:(0,w.jsx)(s.Z,{onClick:()=>{ue(!0)},variant:"contained",color:"secondary",children:"Add Device"})}),(0,w.jsx)(n.ZP,{item:!0,xs:12,children:(0,w.jsx)(i.Z,{component:c.Z,children:(0,w.jsxs)(l.Z,{children:[(0,w.jsx)(o.Z,{children:(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(h.Z,{children:"Device Name"}),(0,w.jsx)(h.Z,{children:"Slave ID"}),(0,w.jsx)(h.Z,{children:"Actions"})]})}),(0,w.jsx)(u.Z,{children:t.map((e=>(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(h.Z,{children:e.name}),(0,w.jsx)(h.Z,{children:e.slave_id}),(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(s.Z,{onClick:()=>(e=>{const r=t.find((t=>t.id===e));Ie(r.name),Te(r.slave_id),D(r),De(!0)})(e.id),variant:"contained",color:"primary",style:{marginRight:"10px"},children:"Update"}),(0,w.jsx)(s.Z,{onClick:()=>((e,t)=>{D(e),Se(t),Fe(!0)})(e.id,e.name),variant:"contained",color:"error",style:{marginRight:"10px"},children:"Delete"}),(0,w.jsx)(s.Z,{onClick:()=>Me(e.id),variant:"contained",color:"primary",style:{marginRight:"10px"},children:"Show"})]})]},e.id)))})]})})})]})}),te&&(0,w.jsx)(x.Z,{severity:"success",onClose:()=>re(""),children:te}),ae&&(0,w.jsx)(x.Z,{severity:"success",onClose:()=>ne(""),children:ae}),se&&(0,w.jsx)(x.Z,{severity:"success",onClose:()=>ne(""),children:se}),ce&&(0,w.jsx)(x.Z,{severity:"error",onClose:()=>le(""),children:ce}),(0,w.jsxs)(j.Z,{open:Ve,onClose:()=>{ze(!1)},maxWidth:"md",fullWidth:!0,children:[(0,w.jsx)(v.Z,{children:"Pop-up Form"}),(0,w.jsxs)(Z.Z,{children:[(0,w.jsx)(s.Z,{onClick:()=>{je(!0)},variant:"contained",color:"secondary",style:{marginRight:"10px"},children:"Add Parameter"}),(0,w.jsx)(s.Z,{onClick:()=>{Ze(!0)},variant:"contained",color:"secondary",children:"Add Attribute"}),(0,w.jsx)(i.Z,{component:c.Z,children:(0,w.jsxs)(l.Z,{children:[(0,w.jsxs)(o.Z,{children:[(0,w.jsx)(d.Z,{children:(0,w.jsx)(h.Z,{colSpan:5,align:"center",children:(0,w.jsx)(m.Z,{variant:"h6",children:"Parameter Table"})})}),(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(h.Z,{children:"Function Code"}),(0,w.jsx)(h.Z,{children:"Address"}),(0,w.jsx)(h.Z,{children:"Parameter Name"}),(0,w.jsx)(h.Z,{children:"Data Type"}),(0,w.jsx)(h.Z,{children:"Actions"})]})]}),(0,w.jsx)(u.Z,{children:_.map((e=>(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(h.Z,{children:e.function_code}),(0,w.jsx)(h.Z,{children:e.address}),(0,w.jsx)(h.Z,{children:e.parameter_name}),(0,w.jsx)(h.Z,{children:e.data_type}),(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(s.Z,{onClick:()=>(e=>{F(e),B(e.function_code),H(e.address),q(e.parameter_name),z(e.data_type),O(!0)})(e),variant:"contained",color:"primary",style:{marginRight:"10px"},children:"Update"}),(0,w.jsx)(s.Z,{onClick:()=>(e=>{F(e),Ce(!0)})(e),variant:"contained",color:"error",children:"Delete"})]})]},e.id)))})]})}),(0,w.jsx)(i.Z,{component:c.Z,style:{marginTop:"20px"},children:(0,w.jsxs)(l.Z,{children:[(0,w.jsxs)(o.Z,{children:[(0,w.jsx)(d.Z,{children:(0,w.jsx)(h.Z,{colSpan:3,align:"center",children:(0,w.jsx)(m.Z,{variant:"h6",children:"Attribute Table"})})}),(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(h.Z,{children:"Attribute Name"}),(0,w.jsx)(h.Z,{children:"Attribute Value"}),(0,w.jsx)(h.Z,{children:"Actions"})]})]}),(0,w.jsx)(u.Z,{children:N.map((e=>(0,w.jsxs)(d.Z,{children:[(0,w.jsx)(h.Z,{children:e.name}),(0,w.jsx)(h.Z,{children:e.value}),(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(s.Z,{onClick:()=>(e=>{He(e),K(e.name),Q(e.value),qe(!0)})(e),variant:"contained",color:"primary",style:{marginRight:"10px"},children:"Update"}),(0,w.jsx)(s.Z,{onClick:()=>(e=>{He(e),be(!0)})(e),variant:"contained",color:"error",children:"Delete"})]})]},e.id)))})]})})]})]}),(0,w.jsxs)(j.Z,{open:U,onClose:st,children:[(0,w.jsx)(v.Z,{style:{color:"#008080"},children:"Update Parameter"}),(0,w.jsx)(Z.Z,{children:(0,w.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(n.ZP,{item:!0,xs:6,children:(0,w.jsxs)(p.Z,{fullWidth:!0,children:[(0,w.jsx)(g.Z,{children:"Function Code"}),(0,w.jsxs)(y.Z,{value:W,onChange:e=>B(e.target.value),children:[(0,w.jsx)(f.Z,{value:"Coil Status",children:"Coil Status"}),(0,w.jsx)(f.Z,{value:"Input Status",children:"Input Status"}),(0,w.jsx)(f.Z,{value:"Holding Register",children:"Holding Register"}),(0,w.jsx)(f.Z,{value:"Input Register",children:"Input Register"})]})]})}),(0,w.jsx)(n.ZP,{item:!0,xs:6,children:(0,w.jsx)(C.Z,{label:"Address",value:J,onChange:e=>H(e.target.value),fullWidth:!0})}),(0,w.jsx)(n.ZP,{item:!0,xs:6,children:(0,w.jsx)(C.Z,{label:"Parameter Name",value:L,onChange:e=>q(e.target.value),fullWidth:!0})}),(0,w.jsx)(n.ZP,{item:!0,xs:6,children:(0,w.jsxs)(p.Z,{fullWidth:!0,children:[(0,w.jsx)(g.Z,{children:"Data Type"}),(0,w.jsxs)(y.Z,{value:V,onChange:e=>z(e.target.value),children:[(0,w.jsx)(f.Z,{value:"Integer",children:"Integer"}),(0,w.jsx)(f.Z,{value:"Float",children:"Float"}),(0,w.jsx)(f.Z,{value:"Double",children:"Double"}),(0,w.jsx)(f.Z,{value:"Boolean",children:"Boolean"})]})]})})]})}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(s.Z,{onClick:st,variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(s.Z,{onClick:async()=>{if(!R||!R.id)return void console.error("No Parameter selected for update");const e={address:J,parameter_name:L,data_type:V};try{const t=await fetch("http://localhost:5000/parameter/devices/".concat(k,"/parameter/").concat(R.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update Parameter: ".concat(t.statusText));Qe({target:{value:k}}),O(!1),B(""),H(""),q(""),z(""),ne("Parameter updated successfully!")}catch(t){console.error("Error updating Parameter:",t),le("Error updating Parameter. ".concat(t.message))}},variant:"contained",color:"primary",children:"Update"})]})]}),(0,w.jsxs)(j.Z,{open:fe,onClose:$e,children:[(0,w.jsx)(v.Z,{children:"Delete Parameter"}),(0,w.jsx)(Z.Z,{children:(0,w.jsx)("p",{children:"Are you sure you want to delete this Parameter?"})}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(s.Z,{onClick:()=>{Ce(!1),pe(null)},variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(s.Z,{onClick:()=>(async e=>{Ce(!1);try{if(k&&e&&e.id){const t=await fetch("http://localhost:5000/parameter/devices/".concat(k,"/parameter/").concat(e.id),{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete parameter: ".concat(t.statusText));ne("Parameter deleted successfully!"),le("");const a=await fetch("http://localhost:5000/devices/".concat(k)),n=await a.json();n.device&&Array.isArray(n.device.parameters)?I(n.device.parameters):I([]);const s=await fetch("http://localhost:5000/devices/"),i=await s.json();Array.isArray(i.devices)?r(i.devices):console.error("Invalid response format for devices:",i)}}catch(t){console.error("Error deleting Parameter:",t),le("Error deleting Parameter. ".concat(t.message))}finally{O(!1),F(null)}})(R),variant:"contained",color:"error",children:"Delete"})]})]}),(0,w.jsxs)(j.Z,{open:Le,onClose:ht,children:[(0,w.jsx)(v.Z,{style:{color:"#008080"},children:"Update Attribute"}),(0,w.jsx)(Z.Z,{children:(0,w.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(n.ZP,{item:!0,xs:6,children:(0,w.jsx)(C.Z,{label:"Name",value:G,onChange:e=>K(e.target.value),fullWidth:!0})}),(0,w.jsx)(n.ZP,{item:!0,xs:6,children:(0,w.jsx)(C.Z,{label:"Value",value:M,onChange:e=>Q(e.target.value),fullWidth:!0})})]})}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(s.Z,{onClick:ht,variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(s.Z,{onClick:async()=>{if(!Je||!Je.id||!k)return void console.error("No Attribute or Device selected for update");const e={name:G,value:M};try{const t=await fetch("http://localhost:5000/attribute/devices/".concat(k,"/attribute/").concat(Je.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update Attribute: ".concat(t.statusText));Qe({target:{value:k}}),ht(),ie("Attribute updated successfully!")}catch(t){console.error("Error updating Attribute:",t),le("Error updating Attribute. ".concat(t.message))}},variant:"contained",color:"primary",children:"Update"})]})]}),(0,w.jsxs)(j.Z,{open:Pe,onClose:$e,children:[(0,w.jsx)(v.Z,{children:"Delete Attribute"}),(0,w.jsx)(Z.Z,{children:(0,w.jsx)("p",{children:"Are you sure you want to delete this Attribute?"})}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(s.Z,{onClick:()=>{be(!1),ye(null)},variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(s.Z,{onClick:()=>(async e=>{Ce(!1);try{if(k&&e&&e.id){const t=await fetch("http://localhost:5000/attribute/devices/".concat(k,"/attribute/").concat(e.id),{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete Attribute: ".concat(t.statusText));ie("Attribute deleted successfully!"),le("");const a=await fetch("http://localhost:5000/devices/".concat(k)),n=await a.json();n.device&&Array.isArray(n.device.attributes)?T(n.device.attributes):T([]);const s=await fetch("http://localhost:5000/devices/"),i=await s.json();Array.isArray(i.devices)?r(i.devices):console.error("Invalid response format for devices:",i)}}catch(t){console.error("Error deleting Attribute:",t),le("Error deleting Attribute. ".concat(t.message))}finally{be(!1),qe(!1),He(null)}})(Je),variant:"contained",color:"error",children:"Delete"})]})]}),(0,w.jsxs)(j.Z,{open:Ee,onClose:Xe,children:[(0,w.jsx)(v.Z,{children:"Update Device"}),(0,w.jsx)(Z.Z,{children:k&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(C.Z,{label:"Device Name",value:_e,onChange:e=>Ie(e.target.value)}),(0,w.jsx)(C.Z,{label:"Slave ID",value:Ne,onChange:e=>Te(e.target.value)})]})}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(s.Z,{onClick:Xe,variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(s.Z,{onClick:async()=>{try{const e={name:_e,slave_id:Ne};await fetch("http://localhost:5000/devices/".concat(k.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});const t=await fetch("http://localhost:5000/devices/"),a=await t.json();Array.isArray(a.devices)?(Se(_e),we(Ne),r(a.devices),re("Device updated successfully!")):console.error("Invalid response format for devices:",a)}catch(e){console.error("Error updating device:",e),le("Error updating device. Please try again.")}finally{De(!1)}},variant:"contained",color:"primary",children:"Update"})]})]}),(0,w.jsxs)(j.Z,{open:Re,onClose:Ye,children:[(0,w.jsx)(v.Z,{children:"Delete Device"}),(0,w.jsx)(Z.Z,{children:(0,w.jsxs)("p",{children:['Are you sure you want to delete "',Ae,'"?']})}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(s.Z,{onClick:Ye,variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(s.Z,{onClick:()=>(async e=>{try{await fetch("http://localhost:5000/devices/".concat(e),{method:"DELETE"});const t=await fetch("http://localhost:5000/devices/"),a=await t.json();Array.isArray(a.devices)?(r(a.devices),I([]),T([]),D(null),Se(""),we("")):console.error("Invalid response format for devices:",a),re("Device deleted successfully!")}catch(t){console.error("Error deleting device:",t),le("Error deleting device. Please try again.")}finally{Fe(!1),O(!1),F(null),He(null)}})(k),variant:"contained",color:"error",children:"Delete"})]})]}),(0,w.jsxs)(j.Z,{open:he,onClose:tt,children:[(0,w.jsx)(v.Z,{children:"Add Device"}),(0,w.jsxs)(Z.Z,{children:[(0,w.jsx)(C.Z,{label:"Device Name",value:X,onChange:e=>Y(e.target.value)}),(0,w.jsx)(C.Z,{label:"Slave ID",value:$,onChange:e=>ee(e.target.value)})]}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(s.Z,{onClick:tt,variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(s.Z,{onClick:async()=>{if(X&&$){const t={name:X,slave_id:$};try{if(!(await fetch("http://localhost:5000/devices/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("Network response was not ok");re("Device created successfully!"),et(),ue(!1);const e=await fetch("http://localhost:5000/devices/"),a=await e.json();Array.isArray(a.devices)?r(a.devices):console.error("Invalid response format for devices:",a)}catch(e){console.error("Error creating device:",e),le("Error creating device. Please try again.")}}else le("Both device name and slave ID are required")},variant:"contained",children:"Create Device"})]})]}),(0,w.jsxs)(j.Z,{open:xe,onClose:rt,children:[(0,w.jsx)(v.Z,{children:"Add Parameter"}),(0,w.jsx)(Z.Z,{children:Ue.map(((e,t)=>(0,w.jsxs)(n.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,w.jsx)(n.ZP,{item:!0,xs:2,children:(0,w.jsxs)(p.Z,{fullWidth:!0,children:[(0,w.jsx)(g.Z,{children:"Function Code"}),(0,w.jsxs)(y.Z,{value:e.function_code||"",onChange:e=>it(t,"function_code",e.target.value),children:[(0,w.jsx)(f.Z,{value:"Coil Status",children:"Coil Status"}),(0,w.jsx)(f.Z,{value:"Input Status",children:"Input Status"}),(0,w.jsx)(f.Z,{value:"Holding Register",children:"Holding Register"}),(0,w.jsx)(f.Z,{value:"Input Register",children:"Input Register"})]})]})}),(0,w.jsx)(n.ZP,{item:!0,xs:3,children:(0,w.jsx)(C.Z,{label:"Address",value:e.address,onChange:e=>it(t,"address",e.target.value)})}),(0,w.jsx)(n.ZP,{item:!0,xs:3,children:(0,w.jsx)(C.Z,{label:"Parameter Name",value:e.ParameterName,onChange:e=>it(t,"ParameterName",e.target.value)})}),(0,w.jsx)(n.ZP,{item:!0,xs:2,children:(0,w.jsxs)(p.Z,{children:[(0,w.jsx)(g.Z,{children:"Data Type"}),(0,w.jsxs)(y.Z,{value:e.data_type,onChange:e=>it(t,"data_type",e.target.value),children:[(0,w.jsx)(f.Z,{value:"Integer",children:"Integer"}),(0,w.jsx)(f.Z,{value:"Float",children:"Float"}),(0,w.jsx)(f.Z,{value:"Double",children:"Double"}),(0,w.jsx)(f.Z,{value:"Boolean",children:"Boolean"})]})]})}),(0,w.jsx)(n.ZP,{item:!0,xs:1,children:0!==t&&(0,w.jsx)(b.Z,{onClick:()=>(e=>{const t=[...Ue];t.splice(e,1),Oe(t)})(t),children:(0,w.jsx)(S.Z,{style:{color:"red"}})})}),(0,w.jsx)(n.ZP,{item:!0,xs:2,children:t===Ue.length-1&&(0,w.jsx)(b.Z,{onClick:nt,children:(0,w.jsx)(A.Z,{style:{color:"green"}})})})]},t)))}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(s.Z,{onClick:rt,variant:"outlined",color:"secondary",children:"Cancel"}),(0,w.jsx)(s.Z,{onClick:()=>{if(!k)return void le("Please select a device!");if(Ue.some((e=>!e.function_code||!e.address||!e.ParameterName||!e.data_type)))return void le("Please fill in all the required fields for each parameter!");const e={parameters:Ue.map((e=>({active:!0,function_code:e.function_code,address:e.address,parameter_name:e.ParameterName,data_type:e.data_type})))};fetch("http://localhost:5000/parameter/devices/".concat(k,"/parameter"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error("One or more parameters failed to create.");return e.json()})).then((e=>{console.log("API Response Data:",e),e.created_parameters?(Ke([...Ge,...e.created_parameters]),ne("Parameters created successfully!"),at(),je(!1),Qe({target:{value:k}})):(console.error("Unexpected response format:",e),le("Error creating Parameters. Please try again."))})).catch((e=>{console.error("Error creating Parameters:",e),le("Error creating Parameters. Please try again.")}))},variant:"contained",color:"primary",children:"Create Parameter"})]})]}),(0,w.jsxs)(j.Z,{open:ve,onClose:lt,children:[(0,w.jsx)(v.Z,{children:"Add Attribute"}),(0,w.jsx)(Z.Z,{children:We.map(((e,t)=>(0,w.jsxs)(n.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,w.jsx)(n.ZP,{item:!0,xs:3,children:(0,w.jsx)(C.Z,{label:"Name",value:e.name,onChange:e=>dt(t,"name",e.target.value)})}),(0,w.jsx)(n.ZP,{item:!0,xs:3,children:(0,w.jsx)(C.Z,{label:"Value",value:e.value,onChange:e=>dt(t,"value",e.target.value)})}),(0,w.jsx)(n.ZP,{item:!0,xs:1,children:0!==t&&(0,w.jsx)(b.Z,{onClick:()=>(e=>{const t=[...We];t.splice(e,1),Be(t)})(t),children:(0,w.jsx)(S.Z,{style:{color:"red"}})})}),(0,w.jsx)(n.ZP,{item:!0,xs:1,children:t===We.length-1&&(0,w.jsx)(b.Z,{onClick:ot,children:(0,w.jsx)(A.Z,{style:{color:"green"}})})})]},t)))}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(s.Z,{onClick:lt,variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(s.Z,{onClick:()=>{if(!k)return void le("Please select a device!");if(We.some((e=>!e.name||!e.value)))return void le("Please fill in all the required fields for each attribute!");const e={attributes:We.map((e=>({name:e.name,value:e.value})))};fetch("http://localhost:5000/attribute/devices/".concat(k,"/attribute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error("One or more attributes failed to create.")})).then((()=>{ie("Attributes created successfully!"),ct(),Ze(!1),Qe({target:{value:k}})})).catch((e=>{console.error("Error creating Attributes:",e),le("Error creating Attributes. Please try again.")}))},variant:"contained",children:"Create Attribute"})]})]})]})}}}]);
//# sourceMappingURL=399.7b0f41bc.chunk.js.map