{"version":3,"file":"static/js/150.11d33c79.chunk.js","mappings":"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","sources":["components/dashboard/Retention.js","views/Retention.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Typography,\n  Grid,\n  Alert,\n  Paper,\n  Button,\n  TextField,\n} from '@mui/material';\n\n// const baseUrl = process.env.REACT_APP_BASEURL;\n\nconst RetentionParameterForm= () => {\n    const [data, setData] = useState(null);\n    const [RetentionParameterSuccessMessage, setRetentionParameterSuccessMessage] = useState('');\n    const [TimeDelaySuccessMessage, setTimeDelaySuccessMessage] = useState('');\n    const [errorMessage, setErrorMessage] = useState('');\n    const [successMessage, setSuccessMessage] = useState('');\n    const [retentionParameters, setRetentionParameters] = useState({\n        checkFrequency: { days: '', hours: '', minutes: '', seconds: '' },\n        successRetention: { days: '', hours: '', minutes: '', seconds: '' },\n        failureRetention: { days: '', hours: '', minutes: '', seconds: '' },\n    });\n    const [valuesChanged, setValuesChanged] = useState(false);\n    const [timeDelayParameters, setTimeDelayParameters] = useState({\n        minutes: '',\n        seconds: '',\n    });\n    const [isFormValid, setIsFormValid] = useState(false);\n\n    const clearMessagesAfterDelay = () => {\n        setTimeout(() => {\n        setRetentionParameterSuccessMessage('');\n        setTimeDelaySuccessMessage('');\n        setErrorMessage('');\n        setSuccessMessage('');\n    }, 5000);\n    };\n\n    useEffect(() => {\n    clearMessagesAfterDelay();\n    }, [RetentionParameterSuccessMessage, TimeDelaySuccessMessage, errorMessage, successMessage]);\n\n    useEffect(() => {\n    const fetchData = async () => {\n        try {\n        const response = await fetch(`/node-parameter/`);\n        const responseData = await response.json();\n        setData(responseData);\n    \n        // Initialize selectedModbus state with modbus values\n        if (responseData.node_parameters) {\n    \n            // Initialize retention parameters\n            const retentionValues = responseData.node_parameters.find(param => param.name === 'retention_parameter')?.value;\n            if (retentionValues) {\n            setRetentionParameters(retentionValues);\n            }\n\n            const timeDelayValues = responseData.node_parameters.find(param => param.name === 'time_delay')?.value;\n            if (timeDelayValues) {\n            setTimeDelayParameters(timeDelayValues);\n            }\n        }\n        } catch (error) {\n        console.error('Error fetching data:', error);\n        }\n    };\n    \n    fetchData();\n    }, []);\n    \n    \n\n    if (!data) {\n    return <p>Loading...</p>;\n    }\n\n\n\n// Define SuccessMessage and ErrorMessage components\n  const SuccessMessage = ({ message}) => (\n    <Alert severity=\"success\" >\n      {message}\n    </Alert>\n  );\n\n  const ErrorMessage = ({ message}) => (\n    <Alert severity=\"error\">\n      {message}\n    </Alert>\n  );\n  \n  const handleRetentionParameterChange = (param, unit, value) => {\n    // Parse the input value as an integer\n    const integerValue = parseInt(value, 10);\n  \n    // Check if the parsed value is a valid integer\n    if (!isNaN(integerValue)) {\n      setRetentionParameters((prevParameters) => ({\n        ...prevParameters,\n        [param]: { ...prevParameters[param], [unit]: integerValue },\n      }));\n    }\n    // Set valuesChanged to true when any value changes\n    setValuesChanged(true);\n  };\n  \n  \n  const handleRetentionParameterSubmit = async () => {\n    try {\n      const response = await fetch(`/node-parameter/5`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          retention_parameter: retentionParameters,\n        }),\n      });\n      // After successful submission, reset valuesChanged to false\n      setValuesChanged(false);\n\n      if (response.ok) {\n        setRetentionParameterSuccessMessage('Retention Parameters updated successfully.');\n      } else {\n        setErrorMessage(`Failed to update Retention Parameters: ${response.statusText}`);\n      }\n    } catch (error) {\n      setErrorMessage(`Error updating Retention Parameters: ${error}`);\n    }\n  };\n\n  const handleReset = () => {\n    // Replace the initialValues with your actual initial values\n    const initialValues = {\n      check_frequency: {\n        days: 0,\n        hours: 0,\n        minutes: 0,\n        seconds: 0,\n      },\n      success_retention: {\n        days: 0,\n        hours: 0,\n        minutes: 0,\n        seconds: 0,\n      },\n      failure_retention: {\n        days: 0,\n        hours: 0,\n        minutes: 0,\n        seconds: 0,\n      },\n    };\n  \n    setRetentionParameters(initialValues);\n    setValuesChanged(false);\n  };\n  \n\n  const handleTimeDelayParameterSubmit = async () => {\n    try {\n      const response = await fetch(`/node-parameter/6`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          time_delay: timeDelayParameters,\n        }),\n      });\n      // Assuming the submission is successful, disable the submit button\n      setIsFormValid(false);\n\n      if (response.ok) {\n        // Display success message or handle as needed\n        setTimeDelaySuccessMessage('Time Delay updated successfully.');\n      } else {\n        // Display error message or handle as needed\n        setErrorMessage(`Failed to update Time Delay: ${response.statusText}`);\n      }\n    } catch (error) {\n      // Display error message or handle as needed\n      setErrorMessage(`Error updating Time Delay: ${error}`);\n    }\n  };\n\n\n    return (\n        <Grid container spacing={1}>\n          <Grid item xs={12}>\n          {RetentionParameterSuccessMessage && (\n            <SuccessMessage message={RetentionParameterSuccessMessage} onClose={() => setRetentionParameterSuccessMessage('')}/>\n          )}\n          {TimeDelaySuccessMessage && (\n            <SuccessMessage message={TimeDelaySuccessMessage} onClose={() => setTimeDelaySuccessMessage('')}/>\n          )}\n          {errorMessage && (\n            <ErrorMessage message={errorMessage} onClose={() => setErrorMessage('')}/>\n          )}\n          </Grid>\n    \n          <Grid item xs={4}>\n            <Paper style={{ padding: '20px', marginBottom: '20px' }}>\n              <Typography variant=\"h6\">Retention Parameters</Typography>\n              <form>\n                {['check_frequency', 'success_retention', 'failure_retention'].map((param, index) => (\n                  <div key={index} style={{ marginBottom: '20px' }}>\n                    <Typography variant=\"subtitle1\">{param.replace('_', ' ')}</Typography>\n                    <div style={{ display: 'flex', flexDirection: 'row' }}>\n                      {['days', 'hours', 'minutes', 'seconds'].map((unit, unitIndex) => (\n                        <TextField\n                          key={unitIndex}\n                          label={unit.charAt(0).toUpperCase() + unit.slice(1)}\n                          type=\"number\"\n                          value={retentionParameters[param][unit]}\n                          onChange={(e) => handleRetentionParameterChange(param, unit, e.target.value)}\n                          fullWidth\n                          style={{ marginRight: '10px' }}\n                          inputProps={{\n                            min: 0,\n                            max: unit === 'days' ? 31 : unit === 'hours' ? 24 : 60,\n                          }}\n                        />\n                      ))}\n                    </div>\n                  </div>\n                ))}\n                <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\n                  <Button\n                    onClick={handleReset}\n                    color=\"primary\"\n                    variant=\"contained\"\n                    style={{ marginRight: '10px' }}\n                  >\n                    Reset\n                  </Button>\n                  <Button\n                    onClick={handleRetentionParameterSubmit}\n                    color=\"primary\"\n                    variant=\"contained\"\n                    disabled={!valuesChanged} // Disable if values have not changed\n                  >\n                    Submit\n                  </Button>\n                </div>\n              </form>\n            </Paper>\n          </Grid>\n    \n    \n          <Grid item xs={4}>\n            <Paper style={{ padding: '20px', marginBottom: '20px' }}>\n              <Typography variant=\"h6\">Time Delay Parameters</Typography>\n              <div style={{ display: 'flex', flexDirection: 'row', marginTop: '10px' }}>\n                <div style={{ display: 'flex', flexDirection: 'row', marginRight: '20px' }}>\n                <TextField\n                  label=\"Minutes\"\n                  type=\"number\"\n                  value={timeDelayParameters.minutes}\n                  style={{ marginRight: '5px' }}\n                  onChange={(e) => {\n                    let newValue = parseInt(e.target.value) || 0;\n                    // Set upper limit to 60\n                    newValue = Math.min(newValue, 60);\n                    newValue = Math.max(newValue, 0); // Set lower limit to 0\n    \n                    setTimeDelayParameters((prev) => ({\n                      ...prev,\n                      minutes: newValue,\n                    }));\n                    setIsFormValid(true);\n                  }}\n                  inputProps={{\n                    step: 1,\n                    min: 0,\n                    max: 60,\n                  }}\n                />\n                <TextField\n                  label=\"Seconds\"\n                  type=\"number\"\n                  value={timeDelayParameters.seconds}\n                  onChange={(e) => {\n                    let newValue = parseInt(e.target.value) || 0;\n                    // Set upper limit to 60\n                    newValue = Math.min(newValue, 60);\n                    newValue = Math.max(newValue, 0); // Set lower limit to 0\n    \n                    setTimeDelayParameters((prev) => ({\n                      ...prev,\n                      seconds: newValue,\n                    }));\n                    setIsFormValid(true);\n                  }}\n                  inputProps={{\n                    step: 1,\n                    min: 0,\n                    max: 60,\n                  }}\n                />\n                </div>\n                <Button\n                  onClick={handleTimeDelayParameterSubmit}\n                  color=\"primary\"\n                  variant=\"contained\"\n                  style={{ marginBottom: '15px' }}\n                  disabled={!isFormValid} // Disable the button when the form is not valid\n                >\n                  Submit\n                </Button>\n              </div>\n            </Paper>\n          </Grid>\n        </Grid>  \n    );\n}\n    \nexport default RetentionParameterForm;","import React from 'react'\nimport RetentionParameterForm from '../components/dashboard/Retention'\n\nconst Retention = () => {\n  return (\n    <div>\n      <h1>Retention</h1>\n        <RetentionParameterForm />\n    </div>\n  )\n}\n\nexport default Retention"],"names":["RetentionParameterForm","data","setData","useState","RetentionParameterSuccessMessage","setRetentionParameterSuccessMessage","TimeDelaySuccessMessage","setTimeDelaySuccessMessage","errorMessage","setErrorMessage","successMessage","setSuccessMessage","retentionParameters","setRetentionParameters","checkFrequency","days","hours","minutes","seconds","successRetention","failureRetention","valuesChanged","setValuesChanged","timeDelayParameters","setTimeDelayParameters","isFormValid","setIsFormValid","useEffect","setTimeout","async","response","fetch","responseData","json","node_parameters","_responseData$node_pa","_responseData$node_pa2","retentionValues","find","param","name","value","timeDelayValues","error","console","fetchData","_jsx","children","SuccessMessage","_ref","message","Alert","severity","ErrorMessage","_ref2","_jsxs","Grid","container","spacing","item","xs","onClose","Paper","style","padding","marginBottom","Typography","variant","map","index","replace","display","flexDirection","unit","unitIndex","TextField","label","charAt","toUpperCase","slice","type","onChange","e","handleRetentionParameterChange","integerValue","parseInt","isNaN","prevParameters","target","fullWidth","marginRight","inputProps","min","max","justifyContent","Button","onClick","handleReset","check_frequency","success_retention","failure_retention","color","method","headers","body","JSON","stringify","retention_parameter","ok","concat","statusText","disabled","marginTop","newValue","Math","prev","step","time_delay","Retention"],"sourceRoot":""}