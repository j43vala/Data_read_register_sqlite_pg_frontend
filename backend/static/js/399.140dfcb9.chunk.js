"use strict";(self.webpackChunkstarter_bt5=self.webpackChunkstarter_bt5||[]).push([[399],{2399:(e,t,a)=>{a.d(t,{Z:()=>N});var r=a(2791),n=a(9658),i=a(1889),s=a(4294),l=a(9281),o=a(5527),c=a(9836),d=a(6890),h=a(5855),u=a(3994),g=a(3382),x=a(6125),m=a(5661),p=a(5289),v=a(9157),j=a(8096),y=a(4925),Z=a(3926),f=a(9891),C=a(7391),b=a(7123),_=a(3400),S=a(2419),P=a(5585),A=a(7247),T=a(1286),k=a(7755),w=a(5678),D=a(5172),E=a(184);const I=(0,k.Z)((e=>({root:{padding:e.spacing(2)},header:{display:"flex",alignItems:"center",marginBottom:e.spacing(2)},headerText:{fontFamily:"Arial, sans-serif",fontSize:"18px",fontWeight:"bold",color:"#333",marginRight:e.spacing(2)},buttonGroup:{marginLeft:"auto",display:"flex",alignItems:"center"},addButton:{marginRight:e.spacing(2),backgroundColor:e.palette.success.main,color:"#fff","&:hover":{backgroundColor:e.palette.success.dark}},deleteButton:{color:e.palette.error.main}}))),N=()=>{const e=I(),[t,a]=(0,r.useState)([]),[k,N]=(0,r.useState)(""),[R,F]=(0,r.useState)([]),[O,H]=(0,r.useState)([]),[W,M]=(0,r.useState)(null),[z,U]=(0,r.useState)(!1),[B,J]=(0,r.useState)(""),[q,V]=(0,r.useState)(""),[L,$]=(0,r.useState)(""),[G,K]=(0,r.useState)(""),[Q,X]=(0,r.useState)(""),[Y,ee]=(0,r.useState)(""),[te,ae]=(0,r.useState)(""),[re,ne]=(0,r.useState)(""),[ie,se]=(0,r.useState)(""),[le,oe]=(0,r.useState)(""),[ce,de]=(0,r.useState)(""),[he,ue]=(0,r.useState)(""),[ge,xe]=(0,r.useState)(""),[me,pe]=(0,r.useState)(""),[ve,je]=(0,r.useState)(""),[ye,Ze]=(0,r.useState)(!1),[fe,Ce]=(0,r.useState)(!1),[be,_e]=(0,r.useState)(!1),[Se,Pe]=(0,r.useState)(null),[Ae,Te]=(0,r.useState)(null),[ke,we]=(0,r.useState)(!1),[De,Ee]=(0,r.useState)(!1),[Ie,Ne]=(0,r.useState)(""),[Re,Fe]=(0,r.useState)(""),[Oe,He]=(0,r.useState)(!1),[We,Me]=(0,r.useState)(""),[ze,Ue]=(0,r.useState)(""),[Be,Je]=(0,r.useState)(!1),[qe,Ve]=(0,r.useState)([{function_code:"",address:"",ParameterName:"",data_type:"",threshold:"",aggregation_type:""}]),[Le,$e]=(0,r.useState)([{name:"",value:""}]),[Ge,Ke]=(0,r.useState)(null),[Qe,Xe]=(0,r.useState)(!1),[Ye,et]=(0,r.useState)([]),[tt,at]=(0,r.useState)(null),[rt,nt]=(0,r.useState)(""),[it,st]=(0,r.useState)(""),[lt,ot]=(0,r.useState)("");(0,r.useEffect)((()=>{setTimeout((()=>{de(""),ue(""),xe(""),pe(""),je("")}),5e3)}),[ce,he,ge,me,ve]),(0,r.useEffect)((()=>{(async()=>{try{const e=await fetch("/devices/"),t=await e.json();Array.isArray(t.devices)?a(t.devices):pe("No Devices Available.!")}catch(e){pe("Error fetching devices: ".concat(e))}})()}),[]);const ct=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{console.log("Fetching device details for deviceId:",e);const a=await fetch("/devices/".concat(encodeURIComponent(e))),r=await a.json();at(t||tt!==e?e:null),r.device&&Array.isArray(r.device.parameters)?r.device.parameters.length>0?(F(r.device.parameters),je(""),pe("")):(F([]),H([])):(F([]),pe("Error fetching Parameters and Attributes or no Parameters and Attributes connected to the selected device")),t||N(e),r.device&&(Ne(r.device.name),Fe(r.device.slave_id),H(r.device.attributes))}catch(a){console.error("Error fetching Device details:",a),pe("Error fetching Device details. Please try again.")}},dt=(e,t)=>{const a=e.target.value;ct(a,t)},ht=()=>{U(!1),J(""),V(""),$(""),K(""),X(""),ee("")},ut=()=>{He(!1)},gt=()=>{Je(!1)},xt=()=>{we(!1)},mt=()=>{se(""),oe(""),nt(""),st(""),ot("")},pt=()=>{Ce(!0)},vt=()=>{Ze(!1),mt()},jt=()=>{Ce(!1),Ve([{function_code:"",address:"",ParameterName:"",data_type:"",threshold:"",aggregation_type:""}]),yt()},yt=()=>{Ve([{function_code:"",address:"",ParameterName:"",data_type:"",threshold:"",aggregation_type:""}])},Zt=()=>{U(!1),J(""),V(""),$(""),K(""),X(""),ee("")},ft=(e,t,a)=>{(/^\d*\.?\d*$/.test(a)||""===a)&&Ct(e,t,a)},Ct=(e,t,a)=>{const r=[...qe];r[e][t]=a,Ve(r)},bt=()=>{$e([{name:"",value:""}])},_t=()=>{_e(!1),$e([{name:"",value:""}]),bt()},St=()=>{console.log("Add Attribute button clicked"),$e([...Le,{name:"",value:""}]),_e(!0)},Pt=()=>{_e(!0)},At=(e,t,a)=>{const r=[...Le];r[e][t]=a,$e(r)},Tt=()=>{Xe(!1),ae(""),ne("")},kt=e=>{let{message:t}=e;return(0,E.jsx)(n.Z,{severity:"success",children:t})},wt=e=>{let{message:t}=e;return(0,E.jsx)(n.Z,{severity:"error",children:t})};return(0,E.jsxs)("div",{children:[(0,E.jsx)("div",{className:e.header,children:(0,E.jsxs)(i.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,E.jsx)(i.ZP,{item:!0,xs:10,children:ce&&(0,E.jsx)(kt,{message:ce,onClose:()=>de("")})}),(0,E.jsx)(i.ZP,{item:!0,xs:2,container:!0,justifyContent:"flex-end",children:(0,E.jsx)(s.Z,{onClick:()=>{Ze(!0)},variant:"contained",style:{backgroundColor:"rgb(125, 60, 152)",color:"rgb(253, 254, 254)"},children:"Add Device"})}),(0,E.jsx)(i.ZP,{item:!0,xs:12,children:(0,E.jsx)(l.Z,{component:o.Z,children:(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(d.Z,{children:(0,E.jsxs)(h.Z,{children:[(0,E.jsx)(u.Z,{children:"Device Name"}),(0,E.jsx)(u.Z,{children:"Slave ID"}),(0,E.jsx)(u.Z,{children:"Actions"})]})}),(0,E.jsx)(g.Z,{children:0===t.length?(0,E.jsx)(h.Z,{children:(0,E.jsx)(u.Z,{colSpan:3,children:"No devices available"})}):t.map((e=>(0,E.jsxs)(r.Fragment,{children:[(0,E.jsxs)(h.Z,{style:{backgroundColor:tt===e.id?"#DB94D4":"inherit"},children:[(0,E.jsx)(u.Z,{style:{color:"rgb(23, 32, 42)"},children:e.name}),(0,E.jsx)(u.Z,{style:{color:"rgb(23, 32, 42)"},children:e.slave_id}),(0,E.jsxs)(u.Z,{children:[(0,E.jsx)(_.Z,{onClick:()=>(e=>{const a=t.find((t=>t.id===e));Me(a.name),Ue(a.slave_id),N(a),He(!0)})(e.id),variant:"contained",style:{marginRight:"10px"},children:(0,E.jsx)(T.Z,{style:{color:"rgb(23, 32, 42)",fontSize:"medium"}})}),(0,E.jsx)(_.Z,{onClick:()=>((e,t)=>{N(e),Ne(t),Je(!0)})(e.id,e.name),variant:"outlined",style:{marginRight:"10px"},children:(0,E.jsx)(A.Z,{style:{color:"rgb(23, 32, 42)",fontSize:"medium"}})}),(0,E.jsx)(_.Z,{onClick:()=>ct(e.id),variant:"contained",color:"primary",style:{float:"right"},children:tt===e.id?(0,E.jsx)(w.Z,{style:{color:"rgb(23, 32, 42)",fontSize:"large"}}):(0,E.jsx)(D.Z,{style:{color:"rgb(23, 32, 42)",fontSize:"large"}})})]})]}),(0,E.jsx)(h.Z,{children:(0,E.jsx)(u.Z,{colSpan:3,children:(0,E.jsx)(x.Z,{in:tt===e.id,timeout:"auto",unmountOnExit:!0,children:(0,E.jsxs)("div",{children:[(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,E.jsx)(m.Z,{children:"Parameter"}),(0,E.jsx)(s.Z,{onClick:pt,variant:"contained",color:"secondary",style:{backgroundColor:"rgb(125, 60, 152)",color:"rgb(253, 254, 254)",marginBottom:"10px"},children:"Add"})]}),he&&(0,E.jsx)(kt,{message:he,onClose:()=>ue("")}),me&&(0,E.jsx)(wt,{message:me,onClose:()=>pe("")}),(0,E.jsx)(l.Z,{component:o.Z,style:{marginTop:"10px"},children:(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(d.Z,{children:(0,E.jsxs)(h.Z,{children:[(0,E.jsx)(u.Z,{children:"Function Code"}),(0,E.jsx)(u.Z,{children:"Address"}),(0,E.jsx)(u.Z,{children:"Parameter"}),(0,E.jsx)(u.Z,{children:"Data Type"}),(0,E.jsx)(u.Z,{children:"Threshold"}),(0,E.jsx)(u.Z,{children:"Aggregation"}),(0,E.jsx)(u.Z,{children:"Actions"})]})}),(0,E.jsx)(g.Z,{children:R.map(((e,t)=>(0,E.jsxs)(h.Z,{children:[(0,E.jsx)(u.Z,{children:e.function_code}),(0,E.jsx)(u.Z,{children:e.address}),(0,E.jsx)(u.Z,{children:e.parameter_name}),(0,E.jsx)(u.Z,{children:e.data_type}),(0,E.jsx)(u.Z,{children:e.threshold}),(0,E.jsx)(u.Z,{children:e.aggregation_type}),(0,E.jsxs)(u.Z,{children:[(0,E.jsx)(_.Z,{onClick:()=>((e,t)=>{M({...e,index:t}),J(e.function_code),V(e.address),$(e.parameter_name),K(e.data_type),X(e.threshold),ee(e.aggregation_type),U(!0)})(e,t),variant:"contained",style:{marginRight:"10px"},children:(0,E.jsx)(T.Z,{style:{color:"gray",fontSize:"medium"}})}),t>=11?(0,E.jsx)(_.Z,{onClick:()=>(e=>{M(e),we(!0)})(e),variant:"contained",children:(0,E.jsx)(A.Z,{style:{color:"gray",fontSize:"medium"}})}):(0,E.jsx)(_.Z,{disabled:!0,variant:"contained",style:{display:"none"},children:(0,E.jsx)(A.Z,{style:{color:"gray",fontSize:"medium"}})})]})]},e.id)))})]})}),(0,E.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,E.jsx)(m.Z,{style:{marginTop:"30px"},children:"Attribute"}),(0,E.jsx)(s.Z,{onClick:Pt,variant:"contained",style:{backgroundColor:"rgb(125, 60, 152)",color:"rgb(253, 254, 254)",marginTop:"30px"},children:"Add"})]}),ge&&(0,E.jsx)(kt,{message:ge,onClose:()=>xe("")}),(0,E.jsx)(l.Z,{component:o.Z,style:{marginTop:"10px"},children:(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(d.Z,{children:(0,E.jsxs)(h.Z,{children:[(0,E.jsx)(u.Z,{children:"Attribute Name"}),(0,E.jsx)(u.Z,{children:"Attribute Value"}),(0,E.jsx)(u.Z,{children:"Actions"})]})}),(0,E.jsx)(g.Z,{children:O.map(((e,t)=>(0,E.jsxs)(h.Z,{children:[(0,E.jsx)(u.Z,{children:e.name}),(0,E.jsx)(u.Z,{children:e.value}),(0,E.jsxs)(u.Z,{children:[(0,E.jsx)(_.Z,{onClick:()=>(e=>{Ke(e),ae(e.name),ne(e.value),Xe(!0)})(e),variant:"contained",style:{marginRight:"10px"},children:(0,E.jsx)(T.Z,{style:{color:"gray",fontSize:"medium"}})}),t>=5?(0,E.jsx)(_.Z,{onClick:()=>(e=>{Ke(e),Ee(!0)})(e),variant:"contained",children:(0,E.jsx)(A.Z,{style:{color:"gray",fontSize:"medium"}})}):(0,E.jsx)(_.Z,{disabled:!0,variant:"contained",style:{display:"none"},children:(0,E.jsx)(A.Z,{style:{color:"gray",fontSize:"medium"}})})]})]},e.id)))})]})})]})})})})]},e.id)))})]})})})]})}),(0,E.jsxs)(p.Z,{open:z,onClose:Zt,fullWidth:!0,maxWidth:"lg",children:[(0,E.jsx)(m.Z,{style:{color:"#008080"},children:"Update Parameter"}),me&&(0,E.jsx)(wt,{message:me,onClose:()=>pe("")}),(0,E.jsx)(v.Z,{children:(0,E.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,E.jsx)(i.ZP,{item:!0,xs:2,children:(0,E.jsxs)(j.Z,{fullWidth:!0,children:[(0,E.jsx)(y.Z,{style:{marginTop:"10px"},children:"Function Code"}),(0,E.jsxs)(Z.Z,{value:B,style:{marginTop:"10px"},onChange:e=>J(e.target.value),children:[(0,E.jsx)(f.Z,{value:"Coil Status",children:"Coil Status"}),(0,E.jsx)(f.Z,{value:"Input Status",children:"Input Status"}),(0,E.jsx)(f.Z,{value:"Holding Register",children:"Holding Register"}),(0,E.jsx)(f.Z,{value:"Input Register",children:"Input Register"})]})]})}),(0,E.jsx)(i.ZP,{item:!0,xs:2,children:(0,E.jsx)(C.Z,{label:"Address",value:q,style:{marginTop:"10px"},onChange:e=>V(e.target.value),fullWidth:!0})}),(0,E.jsx)(i.ZP,{item:!0,xs:1.7,children:(0,E.jsx)(C.Z,{label:"Parameter",value:L,onChange:e=>$(e.target.value),style:{marginTop:"10px"},fullWidth:!0,disabled:W&&W.index<11})}),(0,E.jsx)(i.ZP,{item:!0,xs:2,children:(0,E.jsxs)(j.Z,{fullWidth:!0,children:[(0,E.jsx)(y.Z,{style:{marginTop:"10px"},children:"Data Type"}),(0,E.jsxs)(Z.Z,{value:G,style:{marginTop:"10px"},onChange:e=>K(e.target.value),children:[(0,E.jsx)(f.Z,{value:"Integer",children:"Integer"}),(0,E.jsx)(f.Z,{value:"Float",children:"Float"}),(0,E.jsx)(f.Z,{value:"Double",children:"Double"}),(0,E.jsx)(f.Z,{value:"Boolean",children:"Boolean"})]})]})}),(0,E.jsx)(i.ZP,{item:!0,xs:2,children:(0,E.jsx)(C.Z,{label:"Threshold",value:Q,style:{marginTop:"10px"},onChange:e=>X(e.target.value)})}),(0,E.jsx)(i.ZP,{item:!0,xs:2,children:(0,E.jsxs)(j.Z,{fullWidth:!0,style:{width:"200px"},children:[(0,E.jsx)(y.Z,{style:{marginTop:"10px"},children:"Aggregation"}),(0,E.jsxs)(Z.Z,{value:Y,style:{marginTop:"10px"},onChange:e=>ee(e.target.value),children:[(0,E.jsx)(f.Z,{value:"current_val",children:"Current Value"}),(0,E.jsx)(f.Z,{value:"min",children:"Minimum"}),(0,E.jsx)(f.Z,{value:"max",children:"Maximum"}),(0,E.jsx)(f.Z,{value:"avg",children:"Average"}),(0,E.jsx)(f.Z,{value:"median",children:"Median"}),(0,E.jsx)(f.Z,{value:"rms",children:"Root Mean Square"}),(0,E.jsx)(f.Z,{value:"mode",children:"Mode"})]})]})})]})}),(0,E.jsxs)(b.Z,{children:[(0,E.jsx)(s.Z,{onClick:Zt,variant:"outlined",color:"error",children:"Cancel"}),(0,E.jsx)(s.Z,{onClick:async()=>{if(!W||!W.id)return void pe("No Parameter selected for update");if(!/^\d+$/.test(q))return void pe("Address should contain only integer values");if(!/^-?\d+(\.\d+)?$/.test(Q))return void pe("Threshold should contain only float or integer values");const e={function_code:B,address:q,parameter_name:W.index>=11?L:W.parameter_name,data_type:G,threshold:Q,aggregation_type:Y};try{const t=await fetch("/parameter/devices/".concat(k,"/parameter/").concat(W.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update Parameter: ".concat(t.statusText));dt({target:{value:k}},!0),yt(),ht(),ue("Parameter updated successfully!")}catch(t){console.error("Error updating Parameter:",t),yt(),ht(),pe("Error updating Parameter. ".concat(t.message))}},variant:"contained",color:"primary",children:"Update"})]})]}),(0,E.jsxs)(p.Z,{open:ke,onClose:xt,children:[(0,E.jsx)(m.Z,{children:"Delete Parameter"}),(0,E.jsx)(v.Z,{children:(0,E.jsx)("p",{children:"Are you sure you want to delete this Parameter?"})}),(0,E.jsxs)(b.Z,{children:[(0,E.jsx)(s.Z,{onClick:()=>{we(!1),Pe(null)},variant:"outlined",color:"error",children:"Cancel"}),(0,E.jsx)(s.Z,{onClick:()=>(async e=>{we(!1);try{if(k&&e&&e.id){const t=await fetch("/parameter/devices/".concat(k,"/parameter/").concat(e.id),{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete parameter: ".concat(t.statusText));ue("Parameter deleted successfully!"),pe("");const r=await fetch("/devices/".concat(k)),n=await r.json();n.device&&Array.isArray(n.device.parameters)?F(n.device.parameters):F([]);const i=await fetch("/devices/"),s=await i.json();Array.isArray(s.devices)?a(s.devices):console.error("Invalid response format for devices:",s)}}catch(t){console.error("Error deleting Parameter:",t),pe("Error deleting Parameter. ".concat(t.message))}finally{U(!1),M(null)}})(W),variant:"contained",color:"error",children:"Delete"})]})]}),(0,E.jsxs)(p.Z,{open:Qe,onClose:Tt,children:[(0,E.jsx)(m.Z,{style:{color:"#008080"},children:"Update Attribute"}),(0,E.jsx)(v.Z,{children:(0,E.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,E.jsx)(i.ZP,{item:!0,xs:6,children:(0,E.jsx)(C.Z,{label:"Name",value:te,style:{marginTop:"10px"},onChange:e=>ae(e.target.value),fullWidth:!0,disabled:Ge&&("Device Name"===Ge.name||"Slave ID"===Ge.name)})}),(0,E.jsx)(i.ZP,{item:!0,xs:6,children:(0,E.jsx)(C.Z,{label:"Value",value:re,style:{marginTop:"10px"},onChange:e=>ne(e.target.value),fullWidth:!0,disabled:Ge&&("Device Name"===Ge.name||"Slave ID"===Ge.name)})})]})}),(0,E.jsxs)(b.Z,{children:[(0,E.jsx)(s.Z,{onClick:Tt,variant:"outlined",color:"error",children:"Cancel"}),(0,E.jsx)(s.Z,{onClick:async()=>{if(!Ge||!Ge.id||!k)return void console.error("No Attribute or Device selected for update");if("Device Name"===Ge.name||"Slave ID"===Ge.name)return void console.log("Cannot update attributes with names 'Device Name' or 'Slave ID'");const e={name:te,value:re};try{const t=await fetch("/attribute/devices/".concat(k,"/attribute/").concat(Ge.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update Attribute: ".concat(t.statusText));dt({target:{value:k}},!0),Tt(),bt(),xe("Attribute updated successfully!")}catch(t){console.error("Error updating Attribute:",t),pe("Error updating Attribute. ".concat(t.message)),bt(),Tt()}},variant:"contained",color:"primary",children:"Update"})]})]}),(0,E.jsxs)(p.Z,{open:De,onClose:xt,children:[(0,E.jsx)(m.Z,{children:"Delete Attribute"}),(0,E.jsx)(v.Z,{children:(0,E.jsx)("p",{children:"Are you sure you want to delete this Attribute?"})}),(0,E.jsxs)(b.Z,{children:[(0,E.jsx)(s.Z,{onClick:()=>{Ee(!1),Te(null)},variant:"outlined",color:"error",children:"Cancel"}),(0,E.jsx)(s.Z,{onClick:()=>(async e=>{we(!1);try{if(k&&e&&e.id){const t=await fetch("/attribute/devices/".concat(k,"/attribute/").concat(e.id),{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete Attribute: ".concat(t.statusText));xe("Attribute deleted successfully!"),pe("");const r=await fetch("/devices/".concat(k)),n=await r.json();n.device&&Array.isArray(n.device.attributes)?H(n.device.attributes):H([]);const i=await fetch("/devices/"),s=await i.json();Array.isArray(s.devices)?a(s.devices):console.error("Invalid response format for devices:",s)}}catch(t){console.error("Error deleting Attribute:",t),pe("Error deleting Attribute. ".concat(t.message))}finally{Ee(!1),Xe(!1),Ke(null)}})(Ge),variant:"contained",color:"error",children:"Delete"})]})]}),(0,E.jsxs)(p.Z,{open:Oe,onClose:ut,children:[(0,E.jsx)(m.Z,{children:"Update Device"}),(0,E.jsx)(v.Z,{children:k&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(C.Z,{label:"Device Name",value:We,style:{marginTop:"5px",marginRight:"5px"},onChange:e=>Me(e.target.value)}),(0,E.jsx)(C.Z,{label:"Slave ID",value:ze,style:{marginTop:"5px"},onChange:e=>Ue(e.target.value)})]})}),(0,E.jsxs)(b.Z,{children:[(0,E.jsx)(s.Z,{onClick:ut,variant:"outlined",color:"error",children:"Cancel"}),(0,E.jsx)(s.Z,{onClick:async()=>{try{const e={name:We,slave_id:ze};await fetch("/devices/".concat(k.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});const t=await fetch("/devices/"),r=await t.json();Array.isArray(r.devices)?(Ne(We),Fe(ze),a(r.devices),de("Device updated successfully!")):console.error("Invalid response format for devices:",r)}catch(e){console.error("Error updating device:",e),pe("Error updating device. Please try again.")}finally{He(!1)}},variant:"contained",color:"primary",children:"Update"})]})]}),(0,E.jsxs)(p.Z,{open:Be,onClose:gt,children:[(0,E.jsx)(m.Z,{children:"Delete Device"}),(0,E.jsx)(v.Z,{children:(0,E.jsxs)("p",{children:['Are you sure you want to delete "',Ie,'"?']})}),(0,E.jsxs)(b.Z,{children:[(0,E.jsx)(s.Z,{onClick:gt,variant:"outlined",color:"error",children:"Cancel"}),(0,E.jsx)(s.Z,{onClick:()=>(async e=>{try{await fetch("/devices/".concat(e),{method:"DELETE"});const t=await fetch("/devices/"),r=await t.json();Array.isArray(r.devices)?(a(r.devices),F([]),H([]),N(null),Ne(""),Fe("")):console.error("Invalid response format for devices:",r),de("Device deleted successfully!")}catch(t){console.error("Error deleting device:",t),pe("Error deleting device. Please try again.")}finally{Je(!1),U(!1),M(null),Ke(null)}})(k),variant:"contained",color:"error",children:"Delete"})]})]}),(0,E.jsxs)(p.Z,{open:ye,onClose:vt,children:[(0,E.jsx)(m.Z,{children:"Add Device"}),(0,E.jsxs)(v.Z,{children:[(0,E.jsx)(C.Z,{label:"Device Name",value:ie,onChange:e=>se(e.target.value),style:{marginRight:"5px",marginTop:"5px"}}),(0,E.jsx)(C.Z,{label:"Slave ID",value:le,style:{marginTop:"5px"},onChange:e=>oe(e.target.value)}),(0,E.jsx)(C.Z,{label:"Type",value:rt,style:{marginRight:"5px",marginTop:"5px"},onChange:e=>nt(e.target.value)}),(0,E.jsx)(C.Z,{label:"Company",value:it,style:{marginTop:"5px"},onChange:e=>st(e.target.value)}),(0,E.jsx)(C.Z,{label:"Model Number",value:lt,style:{marginTop:"5px"},onChange:e=>ot(e.target.value)})]}),(0,E.jsxs)(b.Z,{children:[(0,E.jsx)(s.Z,{onClick:vt,variant:"outlined",color:"error",children:"Cancel"}),(0,E.jsx)(s.Z,{onClick:async()=>{if(ie&&le){const t={name:ie,slave_id:le};try{const e=await fetch("/devices/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error("Network response was not ok");const r=(await e.json()).device_id,n={attributes:[{name:"Device Name",value:t.name},{name:"Slave ID",value:t.slave_id},{name:"Type",value:rt},{name:"Company",value:it},{name:"Model Number",value:lt}].map((e=>({name:e.name,value:e.value})))};await fetch("/attribute/devices/".concat(r,"/attribute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});const i={parameters:[{active:!0,function_code:"Holding Register",address:"",parameter_name:"kwh",data_type:"Float",threshold:0,aggregation_type:""},{active:!0,function_code:"Holding Register",address:"",parameter_name:"kvah",data_type:"Float",threshold:0,aggregation_type:""},{active:!0,function_code:"Holding Register",address:"",parameter_name:"kvarh",data_type:"Float",threshold:0,aggregation_type:""},{active:!0,function_code:"Holding Register",address:"",parameter_name:"avg_vln",data_type:"Float",threshold:0,aggregation_type:""},{active:!0,function_code:"Holding Register",address:"",parameter_name:"avg_vll",data_type:"Float",threshold:0,aggregation_type:""},{active:!0,function_code:"Holding Register",address:"",parameter_name:"avg_current",data_type:"Float",threshold:0,aggregation_type:""},{active:!0,function_code:"Holding Register",address:"",parameter_name:"avg_pf",data_type:"Float",threshold:0,aggregation_type:""},{active:!0,function_code:"Holding Register",address:"",parameter_name:"frequency",data_type:"Float",threshold:0,aggregation_type:""},{active:!0,function_code:"Holding Register",address:"",parameter_name:"total_kw",data_type:"Float",threshold:0,aggregation_type:""},{active:!0,function_code:"Holding Register",address:"",parameter_name:"total_kva",data_type:"Float",threshold:0,aggregation_type:""},{active:!0,function_code:"Holding Register",address:"",parameter_name:"total_kvar",data_type:"Float",threshold:0,aggregation_type:""}]};await fetch("/parameter/devices/".concat(r,"/parameter"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),de("Device created successfully!"),mt(),Ze(!1);const s=await fetch("/devices/"),l=await s.json();Array.isArray(l.devices)?a(l.devices):(pe("Invalid response format for devices: ".concat(l)),mt(),Ze(!1))}catch(e){console.error("Error creating device:",e),pe("Error creating device. Please try again."),mt(),Ze(!1)}}else pe("Both device name and slave ID are required"),mt(),Ze(!1)},variant:"contained",children:"Create Device"})]})]}),(0,E.jsxs)(p.Z,{open:fe,onClose:jt,fullWidth:!0,maxWidth:"lg",keepMounted:!0,disableEscapeKeyDown:!0,onClick:e=>e.stopPropagation(),children:[(0,E.jsx)(m.Z,{children:"Add Parameter"}),me&&(0,E.jsx)(wt,{message:me,onClose:()=>pe("")}),(0,E.jsxs)(v.Z,{children:[qe.map(((e,t)=>(0,E.jsxs)(i.ZP,{container:!0,spacing:1,alignItems:"center",style:{height:"70px"},children:[(0,E.jsx)(i.ZP,{item:!0,xs:2,children:(0,E.jsxs)(j.Z,{fullWidth:!0,style:{width:"180px"},children:[(0,E.jsx)(y.Z,{style:{marginTop:"4px"},children:"Function Code"}),(0,E.jsxs)(Z.Z,{value:e.function_code||"",style:{marginTop:"8px"},onChange:e=>Ct(t,"function_code",e.target.value),children:[(0,E.jsx)(f.Z,{value:"Coil Status",children:"Coil Status"}),(0,E.jsx)(f.Z,{value:"Input Status",children:"Input Status"}),(0,E.jsx)(f.Z,{value:"Holding Register",children:"Holding Register"}),(0,E.jsx)(f.Z,{value:"Input Register",children:"Input Register"})]})]})}),(0,E.jsx)(i.ZP,{item:!0,xs:1,children:(0,E.jsx)(C.Z,{label:"Address",value:e.address,style:{marginTop:"5px"},onChange:e=>ft(t,"address",e.target.value)})}),(0,E.jsx)(i.ZP,{item:!0,xs:1.7,children:(0,E.jsx)(C.Z,{label:"Parameter",value:e.ParameterName,style:{marginTop:"5px"},onChange:e=>Ct(t,"ParameterName",e.target.value)})}),(0,E.jsx)(i.ZP,{item:!0,xs:1.35,children:(0,E.jsxs)(j.Z,{fullWidth:!0,style:{width:"120px"},children:[(0,E.jsx)(y.Z,{style:{marginTop:"4px"},children:"Data Type"}),(0,E.jsxs)(Z.Z,{value:e.data_type,style:{marginTop:"6px"},onChange:e=>Ct(t,"data_type",e.target.value),children:[(0,E.jsx)(f.Z,{value:"Integer",children:"Integer"}),(0,E.jsx)(f.Z,{value:"Float",children:"Float"}),(0,E.jsx)(f.Z,{value:"Double",children:"Double"}),(0,E.jsx)(f.Z,{value:"Boolean",children:"Boolean"})]})]})}),(0,E.jsx)(i.ZP,{item:!0,xs:1.1,children:(0,E.jsx)(C.Z,{label:"Threshold",value:e.threshold,style:{marginTop:"5px"},onChange:e=>ft(t,"threshold",e.target.value)})}),(0,E.jsx)(i.ZP,{item:!0,xs:2,children:(0,E.jsxs)(j.Z,{fullWidth:!0,style:{width:"172x",marginRight:"200px"},children:[(0,E.jsx)(y.Z,{style:{marginTop:"4px"},children:"Aggregation"}),(0,E.jsxs)(Z.Z,{value:e.aggregation_type,style:{marginTop:"8px"},onChange:e=>Ct(t,"aggregation_type",e.target.value),children:[(0,E.jsx)(f.Z,{value:"current_val",children:"Current Value"}),(0,E.jsx)(f.Z,{value:"min",children:"Minimum"}),(0,E.jsx)(f.Z,{value:"max",children:"Maximum"}),(0,E.jsx)(f.Z,{value:"avg",children:"Average"}),(0,E.jsx)(f.Z,{value:"median",children:"Median"}),(0,E.jsx)(f.Z,{value:"rms",children:"Root Mean Square"}),(0,E.jsx)(f.Z,{value:"mode",children:"Mode"})]})]})}),(0,E.jsx)(i.ZP,{item:!0,xs:1,children:0!==t&&(0,E.jsx)(_.Z,{onClick:()=>(e=>{const t=[...qe];t.splice(e,1),Ve(t)})(t),children:(0,E.jsx)(P.Z,{style:{color:"red"}})})})]},t))),(0,E.jsx)(i.ZP,{container:!0,spacing:1,alignItems:"center",children:(0,E.jsx)(i.ZP,{item:!0,xs:9.155,align:"right",children:(0,E.jsx)(_.Z,{onClick:()=>{console.log("Add Parameter button clicked"),Ve([...qe,{function_code:"",address:"",ParameterName:"",data_type:"",threshold:"",aggregation_type:""}]),Ce(!0)},children:(0,E.jsx)(S.Z,{style:{color:"green"}})})})})]}),(0,E.jsxs)(b.Z,{style:{marginRight:"200px"},children:[(0,E.jsx)(s.Z,{onClick:jt,variant:"outlined",color:"secondary",children:"Cancel"}),(0,E.jsx)(s.Z,{onClick:()=>{if(!k)return pe("Please select a device!"),void Ce(!1);if(qe.some((e=>!e.function_code||!e.address||!e.ParameterName||!e.data_type||!e.aggregation_type)))return pe("Please fill in all the required fields for each parameter!"),void Ce(!0);if(qe.some((e=>!Number.isInteger(parseInt(e.address,10)))))return void pe("Please Enter Only Integer Values in the Address Field!");const e={parameters:qe.map((e=>({active:!0,function_code:e.function_code,address:e.address,parameter_name:e.ParameterName,data_type:e.data_type,threshold:""!==e.threshold?parseFloat(e.threshold):0,aggregation_type:e.aggregation_type})))};fetch("/parameter/devices/".concat(k,"/parameter"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error("One or more parameters failed to create.");return e.json()})).then((e=>{console.log("API Response Data:",e),e.created_parameters?(et([...Ye,...e.created_parameters]),ue("Parameters created successfully!"),yt(),Ce(!1),dt({target:{value:k}},!0)):(console.error("Unexpected response format:",e),pe("Error creating Parameters. Please try again."),yt(),Ce(!1))})).catch((e=>{console.error("Error creating Parameters:",e),pe("Error creating Parameters. Please try again."),yt(),Ce(!1)}))},variant:"contained",color:"primary",children:"Create Parameter"})]})]}),(0,E.jsxs)(p.Z,{open:be,onClose:_t,children:[(0,E.jsx)(m.Z,{children:"Add Attribute"}),(0,E.jsx)(v.Z,{children:Le.map(((e,t)=>(0,E.jsxs)(i.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,E.jsx)(i.ZP,{item:!0,xs:3,children:(0,E.jsx)(C.Z,{label:"Name",value:e.name,style:{marginTop:"7px"},onChange:e=>At(t,"name",e.target.value)})}),(0,E.jsx)(i.ZP,{item:!0,xs:3,children:(0,E.jsx)(C.Z,{label:"Value",value:e.value,style:{marginTop:"7px"},onChange:e=>At(t,"value",e.target.value)})}),(0,E.jsx)(i.ZP,{item:!0,xs:1,children:0!==t&&(0,E.jsx)(_.Z,{onClick:()=>(e=>{const t=[...Le];t.splice(e,1),$e(t)})(t),children:(0,E.jsx)(P.Z,{style:{color:"red"}})})}),(0,E.jsx)(i.ZP,{item:!0,xs:1,children:t===Le.length-1&&(0,E.jsx)(_.Z,{onClick:St,children:(0,E.jsx)(S.Z,{style:{color:"green"}})})})]},t)))}),(0,E.jsxs)(b.Z,{children:[(0,E.jsx)(s.Z,{onClick:_t,variant:"outlined",color:"error",children:"Cancel"}),(0,E.jsx)(s.Z,{onClick:()=>{if(!k)return void pe("Please select a device!");if(Le.some((e=>!e.name||!e.value)))return pe("Please fill in all the required fields for each attribute!"),void bt();const e={attributes:Le.map((e=>({name:e.name,value:e.value})))};fetch("/attribute/devices/".concat(k,"/attribute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error("One or more attributes failed to create.")})).then((()=>{xe("Attributes created successfully!"),bt(),_e(!1),dt({target:{value:k}},!0)})).catch((e=>{console.error("Error creating Attributes:",e),pe("Error creating Attributes. Please try again."),bt(),_e(!1)}))},variant:"contained",children:"Create Attribute"})]})]})]})}}}]);
//# sourceMappingURL=399.140dfcb9.chunk.js.map