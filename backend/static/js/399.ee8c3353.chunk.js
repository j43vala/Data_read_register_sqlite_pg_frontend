"use strict";(self.webpackChunkstarter_bt5=self.webpackChunkstarter_bt5||[]).push([[399],{2399:(e,t,r)=>{r.d(t,{Z:()=>I});var a=r(2791),n=r(9658),s=r(1889),i=r(4294),l=r(9281),c=r(5527),o=r(9836),d=r(6890),h=r(5855),u=r(3994),x=r(3382),j=r(6125),g=r(5661),m=r(5289),v=r(9157),Z=r(8096),p=r(4925),y=r(3926),f=r(9891),C=r(7391),P=r(7123),b=r(3400),A=r(2419),S=r(5585),T=r(7247),k=r(1286),_=r(7755),w=r(184);const E=(0,_.Z)((e=>({root:{padding:e.spacing(2)},header:{display:"flex",alignItems:"center",marginBottom:e.spacing(2)},headerText:{fontFamily:"Arial, sans-serif",fontSize:"18px",fontWeight:"bold",color:"#333",marginRight:e.spacing(2)},buttonGroup:{marginLeft:"auto",display:"flex",alignItems:"center"},addButton:{marginRight:e.spacing(2),backgroundColor:e.palette.success.main,color:"#fff","&:hover":{backgroundColor:e.palette.success.dark}},deleteButton:{color:e.palette.error.main}}))),I=()=>{const e=E(),[t,r]=(0,a.useState)([]),[_,I]=(0,a.useState)(""),[D,N]=(0,a.useState)([]),[R,F]=(0,a.useState)([]),[O,W]=(0,a.useState)(null),[U,B]=(0,a.useState)(!1),[M,z]=(0,a.useState)(""),[J,V]=(0,a.useState)(""),[H,L]=(0,a.useState)(""),[q,G]=(0,a.useState)(""),[$,K]=(0,a.useState)(""),[Q,X]=(0,a.useState)(""),[Y,ee]=(0,a.useState)(""),[te,re]=(0,a.useState)(""),[ae,ne]=(0,a.useState)(""),[se,ie]=(0,a.useState)(""),[le,ce]=(0,a.useState)(""),[oe,de]=(0,a.useState)(""),[he,ue]=(0,a.useState)(""),[xe,je]=(0,a.useState)(""),[ge,me]=(0,a.useState)(""),[ve,Ze]=(0,a.useState)(!1),[pe,ye]=(0,a.useState)(!1),[fe,Ce]=(0,a.useState)(!1),[Pe,be]=(0,a.useState)(null),[Ae,Se]=(0,a.useState)(null),[Te,ke]=(0,a.useState)(!1),[_e,we]=(0,a.useState)(!1),[Ee,Ie]=(0,a.useState)(""),[De,Ne]=(0,a.useState)(""),[Re,Fe]=(0,a.useState)(!1),[Oe,We]=(0,a.useState)(""),[Ue,Be]=(0,a.useState)(""),[Me,ze]=(0,a.useState)(!1),[Je,Ve]=(0,a.useState)([{function_code:"",address:"",ParameterName:"",data_type:"",threshold:"",aggregation_type:""}]),[He,Le]=(0,a.useState)([{name:"",value:""}]),[qe,Ge]=(0,a.useState)(null),[$e,Ke]=(0,a.useState)(!1),[Qe,Xe]=(0,a.useState)([]),[Ye,et]=(0,a.useState)(null);(0,a.useEffect)((()=>{setTimeout((()=>{ce(""),de(""),ue(""),je(""),me("")}),5e3)}),[le,oe,he,xe,ge]),(0,a.useEffect)((()=>{(async()=>{try{const e=await fetch("/devices/"),t=await e.json();Array.isArray(t.devices)?r(t.devices):je("No Devices Available.!")}catch(e){je("Error fetching devices: ".concat(e))}})()}),[]);const tt=async e=>{try{console.log("Fetching device details for deviceId:",e);const t=await fetch("/devices/".concat(encodeURIComponent(e))),r=await t.json();et((t=>t===e?null:e)),r.device&&Array.isArray(r.device.parameters)?r.device.parameters.length>0?(N(r.device.parameters),me(""),je("")):(N([]),F([]),je("No Parameters And Attributes connected to the selected device")):(N([]),je("Error fetching Parameters and Attributes or no Parameters and Attributes connected to the selected device")),I(e),r.device&&(Ie(r.device.name),Ne(r.device.slave_id),F(r.device.attributes))}catch(t){console.error("Error fetching Device details:",t),je("Error fetching Device details. Please try again.")}},rt=e=>{const t=e.target.value;tt(t)},at=()=>{B(!1),z(""),V(""),L(""),G(""),K(""),X("")},nt=()=>{Fe(!1)},st=()=>{ze(!1)},it=()=>{ke(!1)},lt=()=>{ne(""),ie("")},ct=()=>{ye(!0)},ot=()=>{Ze(!1),lt()},dt=()=>{ye(!1),Ve([{function_code:"",address:"",ParameterName:"",data_type:"",threshold:"",aggregation_type:""}]),ht()},ht=()=>{Ve([{function_code:"",address:"",ParameterName:"",data_type:"",threshold:"",aggregation_type:""}])},ut=()=>{B(!1),z(""),V(""),L(""),G(""),K(""),X("")},xt=(e,t,r)=>{(/^\d*\.?\d*$/.test(r)||""===r)&&jt(e,t,r)},jt=(e,t,r)=>{const a=[...Je];a[e][t]=r,Ve(a)},gt=()=>{Le([{name:"",value:""}])},mt=()=>{Ce(!1),Le([{name:"",value:""}]),gt()},vt=()=>{console.log("Add Attribute button clicked"),Le([...He,{name:"",value:""}]),Ce(!0)},Zt=()=>{Ce(!0)},pt=(e,t,r)=>{const a=[...He];a[e][t]=r,Le(a)},yt=()=>{Ke(!1),ee(""),re("")},ft=e=>{let{message:t}=e;return(0,w.jsx)(n.Z,{severity:"success",children:t})},Ct=e=>{let{message:t}=e;return(0,w.jsx)(n.Z,{severity:"error",children:t})};return(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:e.header,children:(0,w.jsxs)(s.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,w.jsx)(s.ZP,{item:!0,xs:10,children:le&&(0,w.jsx)(ft,{message:le,onClose:()=>ce("")})}),(0,w.jsx)(s.ZP,{item:!0,xs:2,container:!0,justifyContent:"flex-end",children:(0,w.jsx)(i.Z,{onClick:()=>{Ze(!0)},variant:"contained",color:"secondary",children:"Add Device"})}),(0,w.jsx)(s.ZP,{item:!0,xs:12,children:(0,w.jsx)(l.Z,{component:c.Z,children:(0,w.jsxs)(o.Z,{children:[(0,w.jsx)(d.Z,{children:(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(u.Z,{children:"Device Name"}),(0,w.jsx)(u.Z,{children:"Slave ID"}),(0,w.jsx)(u.Z,{children:"Actions"})]})}),(0,w.jsx)(x.Z,{children:t.map((e=>(0,w.jsxs)(a.Fragment,{children:[(0,w.jsxs)(h.Z,{style:{backgroundColor:Ye===e.id?"lightblue":"inherit"},children:[(0,w.jsx)(u.Z,{children:e.name}),(0,w.jsx)(u.Z,{children:e.slave_id}),(0,w.jsxs)(u.Z,{children:[(0,w.jsx)(b.Z,{onClick:()=>(e=>{const r=t.find((t=>t.id===e));We(r.name),Be(r.slave_id),I(r),Fe(!0)})(e.id),variant:"contained",style:{marginRight:"10px"},children:(0,w.jsx)(k.Z,{style:{color:"gray",fontSize:"medium"}})}),(0,w.jsx)(b.Z,{onClick:()=>((e,t)=>{I(e),Ie(t),ze(!0)})(e.id,e.name),variant:"outlined",style:{marginRight:"10px"},children:(0,w.jsx)(T.Z,{style:{color:"gray",fontSize:"medium"}})}),(0,w.jsx)(i.Z,{onClick:()=>tt(e.id),variant:"contained",color:"primary",style:{float:"right"},children:"Configuration"})]})]}),(0,w.jsx)(h.Z,{children:(0,w.jsx)(u.Z,{colSpan:3,children:(0,w.jsx)(j.Z,{in:Ye===e.id,timeout:"auto",unmountOnExit:!0,children:(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,w.jsx)(g.Z,{children:"Parameter"}),(0,w.jsx)(i.Z,{onClick:ct,variant:"contained",color:"secondary",style:{marginBottom:"10px"},children:"Add"})]}),oe&&(0,w.jsx)(ft,{message:oe,onClose:()=>de("")}),xe&&(0,w.jsx)(Ct,{message:xe,onClose:()=>je("")}),(0,w.jsx)(l.Z,{component:c.Z,style:{marginTop:"10px"},children:(0,w.jsxs)(o.Z,{children:[(0,w.jsx)(d.Z,{children:(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(u.Z,{children:"Function Code"}),(0,w.jsx)(u.Z,{children:"Address"}),(0,w.jsx)(u.Z,{children:"Parameter Name"}),(0,w.jsx)(u.Z,{children:"Data Type"}),(0,w.jsx)(u.Z,{children:"Threshold"}),(0,w.jsx)(u.Z,{children:"Aggregation Type"}),(0,w.jsx)(u.Z,{children:"Actions"})]})}),(0,w.jsx)(x.Z,{children:D.map((e=>(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(u.Z,{children:e.function_code}),(0,w.jsx)(u.Z,{children:e.address}),(0,w.jsx)(u.Z,{children:e.parameter_name}),(0,w.jsx)(u.Z,{children:e.data_type}),(0,w.jsx)(u.Z,{children:e.threshold}),(0,w.jsx)(u.Z,{children:e.aggregation_type}),(0,w.jsxs)(u.Z,{children:[(0,w.jsx)(b.Z,{onClick:()=>(e=>{W(e),z(e.function_code),V(e.address),L(e.parameter_name),G(e.data_type),K(e.threshold),X(e.aggregation_type),B(!0)})(e),variant:"contained",style:{marginRight:"10px"},children:(0,w.jsx)(k.Z,{style:{color:"gray",fontSize:"medium"}})}),(0,w.jsx)(b.Z,{onClick:()=>(e=>{W(e),ke(!0)})(e),variant:"contained",children:(0,w.jsx)(T.Z,{style:{color:"gray",fontSize:"medium"}})})]})]},e.id)))})]})}),(0,w.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,w.jsx)(g.Z,{style:{marginTop:"30px"},children:"Attribute"}),(0,w.jsx)(i.Z,{onClick:Zt,variant:"contained",color:"secondary",style:{marginTop:"30px"},children:"Add"})]}),he&&(0,w.jsx)(ft,{message:he,onClose:()=>ue("")}),(0,w.jsx)(l.Z,{component:c.Z,style:{marginTop:"10px"},children:(0,w.jsxs)(o.Z,{children:[(0,w.jsx)(d.Z,{children:(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(u.Z,{children:"Attribute Name"}),(0,w.jsx)(u.Z,{children:"Attribute Value"}),(0,w.jsx)(u.Z,{children:"Actions"})]})}),(0,w.jsx)(x.Z,{children:R.map((e=>(0,w.jsxs)(h.Z,{children:[(0,w.jsx)(u.Z,{children:e.name}),(0,w.jsx)(u.Z,{children:e.value}),(0,w.jsxs)(u.Z,{children:[(0,w.jsx)(b.Z,{onClick:()=>(e=>{Ge(e),ee(e.name),re(e.value),Ke(!0)})(e),variant:"contained",style:{marginRight:"10px"},children:(0,w.jsx)(k.Z,{style:{color:"gray",fontSize:"medium"}})}),(0,w.jsx)(b.Z,{onClick:()=>(e=>{Ge(e),we(!0)})(e),variant:"contained",children:(0,w.jsx)(T.Z,{style:{color:"gray",fontSize:"medium"}})})]})]},e.id)))})]})})]})})})})]},e.id)))})]})})})]})}),(0,w.jsxs)(m.Z,{open:U,onClose:ut,children:[(0,w.jsx)(g.Z,{style:{color:"#008080"},children:"Update Parameter"}),(0,w.jsx)(v.Z,{children:(0,w.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(s.ZP,{item:!0,xs:6,children:(0,w.jsxs)(Z.Z,{fullWidth:!0,children:[(0,w.jsx)(p.Z,{style:{marginTop:"10px"},children:"Function Code"}),(0,w.jsxs)(y.Z,{value:M,style:{marginTop:"10px"},onChange:e=>z(e.target.value),children:[(0,w.jsx)(f.Z,{value:"Coil Status",children:"Coil Status"}),(0,w.jsx)(f.Z,{value:"Input Status",children:"Input Status"}),(0,w.jsx)(f.Z,{value:"Holding Register",children:"Holding Register"}),(0,w.jsx)(f.Z,{value:"Input Register",children:"Input Register"})]})]})}),(0,w.jsx)(s.ZP,{item:!0,xs:6,children:(0,w.jsx)(C.Z,{label:"Address",value:J,style:{marginTop:"10px"},onChange:e=>V(e.target.value),fullWidth:!0})}),(0,w.jsx)(s.ZP,{item:!0,xs:6,children:(0,w.jsx)(C.Z,{label:"Parameter Name",value:H,onChange:e=>L(e.target.value),fullWidth:!0})}),(0,w.jsx)(s.ZP,{item:!0,xs:6,children:(0,w.jsxs)(Z.Z,{fullWidth:!0,children:[(0,w.jsx)(p.Z,{children:"Data Type"}),(0,w.jsxs)(y.Z,{value:q,onChange:e=>G(e.target.value),children:[(0,w.jsx)(f.Z,{value:"Integer",children:"Integer"}),(0,w.jsx)(f.Z,{value:"Float",children:"Float"}),(0,w.jsx)(f.Z,{value:"Double",children:"Double"}),(0,w.jsx)(f.Z,{value:"Boolean",children:"Boolean"})]})]})}),(0,w.jsx)(s.ZP,{item:!0,xs:6,children:(0,w.jsx)(C.Z,{label:"Threshold",value:$,onChange:e=>K(e.target.value),fullWidth:!0})}),(0,w.jsx)(s.ZP,{item:!0,xs:6,children:(0,w.jsxs)(Z.Z,{fullWidth:!0,children:[(0,w.jsx)(p.Z,{children:"Aggregation Type"}),(0,w.jsxs)(y.Z,{value:Q,onChange:e=>X(e.target.value),children:[(0,w.jsx)(f.Z,{value:"min",children:"Min"}),(0,w.jsx)(f.Z,{value:"max",children:"Max"}),(0,w.jsx)(f.Z,{value:"avg",children:"Avg"}),(0,w.jsx)(f.Z,{value:"median",children:"Median"}),(0,w.jsx)(f.Z,{value:"rms",children:"Rms"}),(0,w.jsx)(f.Z,{value:"mode",children:"Mode"})]})]})})]})}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(i.Z,{onClick:ut,variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(i.Z,{onClick:async()=>{if(!O||!O.id)return void je("No Parameter selected for update");if(!Number.isInteger(parseInt(J,10)))return je("Please Insert Only Integer Values in the Address field!"),void at();const e={function_code:M,address:J,parameter_name:H,data_type:q,threshold:$,aggregation_type:Q};try{const t=await fetch("/parameter/devices/".concat(_,"/parameter/").concat(O.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update Parameter: ".concat(t.statusText));rt({target:{value:_}}),ht(),at(),de("Parameter updated successfully!")}catch(t){console.error("Error updating Parameter:",t),ht(),at(),je("Error updating Parameter. ".concat(t.message))}},variant:"contained",color:"primary",children:"Update"})]})]}),(0,w.jsxs)(m.Z,{open:Te,onClose:it,children:[(0,w.jsx)(g.Z,{children:"Delete Parameter"}),(0,w.jsx)(v.Z,{children:(0,w.jsx)("p",{children:"Are you sure you want to delete this Parameter?"})}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(i.Z,{onClick:()=>{ke(!1),be(null)},variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(i.Z,{onClick:()=>(async e=>{ke(!1);try{if(_&&e&&e.id){const t=await fetch("/parameter/devices/".concat(_,"/parameter/").concat(e.id),{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete parameter: ".concat(t.statusText));de("Parameter deleted successfully!"),je("");const a=await fetch("/devices/".concat(_)),n=await a.json();n.device&&Array.isArray(n.device.parameters)?N(n.device.parameters):N([]);const s=await fetch("/devices/"),i=await s.json();Array.isArray(i.devices)?r(i.devices):console.error("Invalid response format for devices:",i)}}catch(t){console.error("Error deleting Parameter:",t),je("Error deleting Parameter. ".concat(t.message))}finally{B(!1),W(null)}})(O),variant:"contained",color:"error",children:"Delete"})]})]}),(0,w.jsxs)(m.Z,{open:$e,onClose:yt,children:[(0,w.jsx)(g.Z,{style:{color:"#008080"},children:"Update Attribute"}),(0,w.jsx)(v.Z,{children:(0,w.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(s.ZP,{item:!0,xs:6,children:(0,w.jsx)(C.Z,{label:"Name",value:Y,onChange:e=>ee(e.target.value),fullWidth:!0})}),(0,w.jsx)(s.ZP,{item:!0,xs:6,children:(0,w.jsx)(C.Z,{label:"Value",value:te,onChange:e=>re(e.target.value),fullWidth:!0})})]})}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(i.Z,{onClick:yt,variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(i.Z,{onClick:async()=>{if(!qe||!qe.id||!_)return void console.error("No Attribute or Device selected for update");const e={name:Y,value:te};try{const t=await fetch("/attribute/devices/".concat(_,"/attribute/").concat(qe.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to update Attribute: ".concat(t.statusText));rt({target:{value:_}}),yt(),gt(),ue("Attribute updated successfully!")}catch(t){console.error("Error updating Attribute:",t),je("Error updating Attribute. ".concat(t.message)),gt(),yt()}},variant:"contained",color:"primary",children:"Update"})]})]}),(0,w.jsxs)(m.Z,{open:_e,onClose:it,children:[(0,w.jsx)(g.Z,{children:"Delete Attribute"}),(0,w.jsx)(v.Z,{children:(0,w.jsx)("p",{children:"Are you sure you want to delete this Attribute?"})}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(i.Z,{onClick:()=>{we(!1),Se(null)},variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(i.Z,{onClick:()=>(async e=>{ke(!1);try{if(_&&e&&e.id){const t=await fetch("/attribute/devices/".concat(_,"/attribute/").concat(e.id),{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete Attribute: ".concat(t.statusText));ue("Attribute deleted successfully!"),je("");const a=await fetch("/devices/".concat(_)),n=await a.json();n.device&&Array.isArray(n.device.attributes)?F(n.device.attributes):F([]);const s=await fetch("/devices/"),i=await s.json();Array.isArray(i.devices)?r(i.devices):console.error("Invalid response format for devices:",i)}}catch(t){console.error("Error deleting Attribute:",t),je("Error deleting Attribute. ".concat(t.message))}finally{we(!1),Ke(!1),Ge(null)}})(qe),variant:"contained",color:"error",children:"Delete"})]})]}),(0,w.jsxs)(m.Z,{open:Re,onClose:nt,children:[(0,w.jsx)(g.Z,{children:"Update Device"}),(0,w.jsx)(v.Z,{children:_&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(C.Z,{label:"Device Name",value:Oe,style:{marginTop:"5px",marginRight:"5px"},onChange:e=>We(e.target.value)}),(0,w.jsx)(C.Z,{label:"Slave ID",value:Ue,style:{marginTop:"5px"},onChange:e=>Be(e.target.value)})]})}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(i.Z,{onClick:nt,variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(i.Z,{onClick:async()=>{try{const e={name:Oe,slave_id:Ue};await fetch("/devices/".concat(_.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});const t=await fetch("/devices/"),a=await t.json();Array.isArray(a.devices)?(Ie(Oe),Ne(Ue),r(a.devices),ce("Device updated successfully!")):console.error("Invalid response format for devices:",a)}catch(e){console.error("Error updating device:",e),je("Error updating device. Please try again.")}finally{Fe(!1)}},variant:"contained",color:"primary",children:"Update"})]})]}),(0,w.jsxs)(m.Z,{open:Me,onClose:st,children:[(0,w.jsx)(g.Z,{children:"Delete Device"}),(0,w.jsx)(v.Z,{children:(0,w.jsxs)("p",{children:['Are you sure you want to delete "',Ee,'"?']})}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(i.Z,{onClick:st,variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(i.Z,{onClick:()=>(async e=>{try{await fetch("/devices/".concat(e),{method:"DELETE"});const t=await fetch("/devices/"),a=await t.json();Array.isArray(a.devices)?(r(a.devices),N([]),F([]),I(null),Ie(""),Ne("")):console.error("Invalid response format for devices:",a),ce("Device deleted successfully!")}catch(t){console.error("Error deleting device:",t),je("Error deleting device. Please try again.")}finally{ze(!1),B(!1),W(null),Ge(null)}})(_),variant:"contained",color:"error",children:"Delete"})]})]}),(0,w.jsxs)(m.Z,{open:ve,onClose:ot,children:[(0,w.jsx)(g.Z,{children:"Add Device"}),(0,w.jsxs)(v.Z,{children:[(0,w.jsx)(C.Z,{label:"Device Name",value:ae,onChange:e=>ne(e.target.value),style:{marginRight:"5px",marginTop:"5px"}}),(0,w.jsx)(C.Z,{label:"Slave ID",value:se,style:{marginTop:"5px"},onChange:e=>ie(e.target.value)})]}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(i.Z,{onClick:ot,variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(i.Z,{onClick:async()=>{if(ae&&se){const t={name:ae,slave_id:se};try{if(!(await fetch("/devices/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw new Error("Network response was not ok");ce("Device created successfully!"),lt(),Ze(!1);const e=await fetch("/devices/"),a=await e.json();Array.isArray(a.devices)?r(a.devices):(je("Invalid response format for devices: ".concat(a)),lt(),Ze(!1))}catch(e){console.error("Error creating device:",e),je("Error creating device. Please try again."),lt(),Ze(!1)}}else je("Both device name and slave ID are required"),lt(),Ze(!1)},variant:"contained",children:"Create Device"})]})]}),(0,w.jsxs)(m.Z,{open:pe,onClose:dt,fullWidth:!0,children:[(0,w.jsx)(g.Z,{children:"Add Parameter"}),xe&&(0,w.jsx)(Ct,{message:xe,onClose:()=>je("")}),(0,w.jsxs)(v.Z,{children:[Je.map(((e,t)=>(0,w.jsxs)(s.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,w.jsx)(s.ZP,{item:!0,xs:3,children:(0,w.jsxs)(Z.Z,{fullWidth:!0,children:[(0,w.jsx)(p.Z,{style:{marginTop:"5px"},children:"Function Code"}),(0,w.jsxs)(y.Z,{value:e.function_code||"",style:{marginTop:"8px"},onChange:e=>jt(t,"function_code",e.target.value),children:[(0,w.jsx)(f.Z,{value:"Coil Status",children:"Coil Status"}),(0,w.jsx)(f.Z,{value:"Input Status",children:"Input Status"}),(0,w.jsx)(f.Z,{value:"Holding Register",children:"Holding Register"}),(0,w.jsx)(f.Z,{value:"Input Register",children:"Input Register"})]})]})}),(0,w.jsx)(s.ZP,{item:!0,xs:2,children:(0,w.jsx)(C.Z,{label:"Address",value:e.address,style:{marginTop:"5px"},onChange:e=>xt(t,"address",e.target.value)})}),(0,w.jsx)(s.ZP,{item:!0,xs:2,children:(0,w.jsx)(C.Z,{label:"Parameter Name",value:e.ParameterName,style:{marginTop:"5px"},onChange:e=>jt(t,"ParameterName",e.target.value)})}),(0,w.jsx)(s.ZP,{item:!0,xs:2,children:(0,w.jsxs)(Z.Z,{fullWidth:!0,children:[(0,w.jsx)(p.Z,{style:{marginTop:"5px"},children:"Data Type"}),(0,w.jsxs)(y.Z,{value:e.data_type,style:{marginTop:"8px"},onChange:e=>jt(t,"data_type",e.target.value),children:[(0,w.jsx)(f.Z,{value:"Integer",children:"Integer"}),(0,w.jsx)(f.Z,{value:"Float",children:"Float"}),(0,w.jsx)(f.Z,{value:"Double",children:"Double"}),(0,w.jsx)(f.Z,{value:"Boolean",children:"Boolean"})]})]})}),(0,w.jsx)(s.ZP,{item:!0,xs:2,children:(0,w.jsx)(C.Z,{label:"Threshold",value:e.threshold,style:{marginTop:"5px"},onChange:e=>xt(t,"threshold",e.target.value)})}),(0,w.jsx)(s.ZP,{item:!0,xs:2,children:(0,w.jsxs)(Z.Z,{fullWidth:!0,children:[(0,w.jsx)(p.Z,{style:{marginTop:"5px"},children:"Aggregation Type"}),(0,w.jsxs)(y.Z,{value:e.aggregation_type,style:{marginTop:"8px"},onChange:e=>jt(t,"aggregation_type",e.target.value),children:[(0,w.jsx)(f.Z,{value:"min",children:"Min"}),(0,w.jsx)(f.Z,{value:"max",children:"Max"}),(0,w.jsx)(f.Z,{value:"avg",children:"Avg"}),(0,w.jsx)(f.Z,{value:"median",children:"Median"}),(0,w.jsx)(f.Z,{value:"rms",children:"Rms"}),(0,w.jsx)(f.Z,{value:"mode",children:"Mode"})]})]})}),(0,w.jsx)(s.ZP,{item:!0,xs:1,children:0!==t&&(0,w.jsx)(b.Z,{onClick:()=>(e=>{const t=[...Je];t.splice(e,1),Ve(t)})(t),children:(0,w.jsx)(S.Z,{style:{color:"red"}})})})]},t))),(0,w.jsx)(s.ZP,{container:!0,spacing:2,alignItems:"center",children:(0,w.jsx)(s.ZP,{item:!0,xs:12,align:"right",children:(0,w.jsx)(b.Z,{onClick:()=>{console.log("Add Parameter button clicked"),Ve([...Je,{function_code:"",address:"",ParameterName:"",data_type:"",threshold:"",aggregation_type:""}]),ye(!0)},children:(0,w.jsx)(A.Z,{style:{color:"green"}})})})})]}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(i.Z,{onClick:dt,variant:"outlined",color:"secondary",children:"Cancel"}),(0,w.jsx)(i.Z,{onClick:()=>{if(!_)return je("Please select a device!"),void ye(!1);if(Je.some((e=>!e.function_code||!e.address||!e.ParameterName||!e.data_type||!e.aggregation_type)))return je("Please fill in all the required fields for each parameter!"),void ye(!1);if(Je.some((e=>!Number.isInteger(parseInt(e.address,10)))))return void je("Please Enter Only Integer Values in the Address Field!");const e={parameters:Je.map((e=>({active:!0,function_code:e.function_code,address:e.address,parameter_name:e.ParameterName,data_type:e.data_type,threshold:""!==e.threshold?parseFloat(e.threshold):0,aggregation_type:e.aggregation_type})))};fetch("/parameter/devices/".concat(_,"/parameter"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error("One or more parameters failed to create.");return e.json()})).then((e=>{console.log("API Response Data:",e),e.created_parameters?(Xe([...Qe,...e.created_parameters]),de("Parameters created successfully!"),ht(),ye(!1),rt({target:{value:_}})):(console.error("Unexpected response format:",e),je("Error creating Parameters. Please try again."),ht(),ye(!1))})).catch((e=>{console.error("Error creating Parameters:",e),je("Error creating Parameters. Please try again."),ht(),ye(!1)}))},variant:"contained",color:"primary",children:"Create Parameter"})]})]}),(0,w.jsxs)(m.Z,{open:fe,onClose:mt,children:[(0,w.jsx)(g.Z,{children:"Add Attribute"}),(0,w.jsx)(v.Z,{children:He.map(((e,t)=>(0,w.jsxs)(s.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,w.jsx)(s.ZP,{item:!0,xs:3,children:(0,w.jsx)(C.Z,{label:"Name",value:e.name,style:{marginTop:"7px"},onChange:e=>pt(t,"name",e.target.value)})}),(0,w.jsx)(s.ZP,{item:!0,xs:3,children:(0,w.jsx)(C.Z,{label:"Value",value:e.value,style:{marginTop:"7px"},onChange:e=>pt(t,"value",e.target.value)})}),(0,w.jsx)(s.ZP,{item:!0,xs:1,children:0!==t&&(0,w.jsx)(b.Z,{onClick:()=>(e=>{const t=[...He];t.splice(e,1),Le(t)})(t),children:(0,w.jsx)(S.Z,{style:{color:"red"}})})}),(0,w.jsx)(s.ZP,{item:!0,xs:1,children:t===He.length-1&&(0,w.jsx)(b.Z,{onClick:vt,children:(0,w.jsx)(A.Z,{style:{color:"green"}})})})]},t)))}),(0,w.jsxs)(P.Z,{children:[(0,w.jsx)(i.Z,{onClick:mt,variant:"outlined",color:"error",children:"Cancel"}),(0,w.jsx)(i.Z,{onClick:()=>{if(!_)return void je("Please select a device!");if(He.some((e=>!e.name||!e.value)))return je("Please fill in all the required fields for each attribute!"),void gt();const e={attributes:He.map((e=>({name:e.name,value:e.value})))};fetch("/attribute/devices/".concat(_,"/attribute"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(!e.ok)throw new Error("One or more attributes failed to create.")})).then((()=>{ue("Attributes created successfully!"),gt(),Ce(!1),rt({target:{value:_}})})).catch((e=>{console.error("Error creating Attributes:",e),je("Error creating Attributes. Please try again."),gt(),Ce(!1)}))},variant:"contained",children:"Create Attribute"})]})]})]})}}}]);
//# sourceMappingURL=399.ee8c3353.chunk.js.map